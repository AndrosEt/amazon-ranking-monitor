{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?4a62","webpack:///./src/App.vue?755c","webpack:///src/App.vue","webpack:///./src/App.vue?60d0","webpack:///./src/App.vue?315a","webpack:///./node_modules/moment/locale sync ^\\.\\/.*$","webpack:///./src/dbOperation.js","webpack:///./src/router.js","webpack:///./src/main.js","webpack:///./src/constant.js","webpack:///./src/Amazon.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","installedCssChunks","jsonpScriptSrc","p","exports","module","l","e","promises","cssChunks","Promise","resolve","reject","href","fullhref","existingLinkTags","document","getElementsByTagName","tag","dataHref","getAttribute","rel","existingStyleTags","linkTag","createElement","type","onload","onerror","event","request","target","src","err","Error","code","parentNode","removeChild","head","appendChild","then","installedChunkData","promise","onScriptComplete","script","charset","timeout","nc","setAttribute","error","clearTimeout","chunk","errorType","realSrc","message","name","undefined","setTimeout","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","console","jsonpArray","window","oldJsonpFunction","slice","render","_vm","this","_h","$createElement","_c","_self","attrs","staticRenderFns","components","INIT_OPTIONS","bulk","number","filetype","rating","page","cookie","asyncTasks","sponsored","category","cli","sort","discount","reviewFilter","sortBy","verifiedPurchaseOnly","filterByStar","formatType","dbDataList","dbKeyList","created","mounted","methods","startTask","listLoop","keywordList","checkRanking","asin","options","scraper","that","newRanking","index","time","sss","component","map","webpackContext","req","id","webpackContextResolve","keys","typeList","instance","dbOperation","includes","toString","readType","dbInit","res","objectStore","transaction","response","onsuccess","connection","indexedDB","open","onupgradeneeded","db","objectStoreNames","contains","createObjectStore","autoIncrement","Vue","use","VueRouter","routes","path","redirect","children","router","config","productionTip","ElementUI","$dbOperation","h","App","$mount","moment","require","limit","product","reviews","defaultItemLimit","recent","helpful","positive","critical","1","2","3","4","5","all_formats","current_format","geo","US","country","currency","symbol","host","variants","split_text","best_seller","text","match","rank","parseInt","replace","trim","review_date","date","dateRegex","exec","unix","Date","utc","price_format","price","formatedPrice","parseFloat","product_information","fields","Manufacturer","Department","Language","Publisher","Hardcover","Paperback","AU","BR","CA","CN","商品尺寸","商品重量","制造商","FR","DE","IN","IT","MX","NL","SG","ES","Fabricante","Departamento","TR","symbole","Üretici","AE","GB","JP","梱包サイズ","発売日","商品の重量","SE","PL","rp","forEachLimit","writeFile","fromCallback","cheerio","Parser","CONST","AmazonScraper","keyword","proxy","scrapeType","ua","randomUa","referer","asyncPage","mainHost","productSearchCategory","collector","searchPage","minRating","maxRating","totalProducts","reviewMetadata","total_reviews","stars_stat","fileType","jsonToCsv","flatten","initTime","now","ranking","os","Math","floor","random","Array","isArray","socks","uri","method","qs","json","body","form","getProxy","headers","userAgent","accept","getReferer","round","downlink","rtt","pragma","ect","DNT","strictSSL","gzip","resolveWithFullResponse","agent","ceil","buildRequest","$","load","amountStr","split","Number","mainLoop","sortAndFilterResult","saveResultToFile","log","fileName","item","grapAsinDetails","totalResultCount","grabProduct","grabReviews","grabRanking","cb","JSON","stringify","ee","parse","a","b","position","global_position","forEach","score","filter","discounted","validateRating","setRequestEndpoint","k","ref","pageNumber","httpRequest","searchAsin","resultList","el","isAd","has","reviewListStat","star","percentage","reviewsList","scrapingResult","totalInResult","reviewId","attribs","search","original","variant","review_data","url","asinRegex","title","buf","review","verified_purchase","featureBullets","featureList","featureListExpanded","bestsellers_rank","dimensions","weight","available_from","available_from_utc","available_for_months","available_for_days","manufacturer","model_number","department","unOrderedList","bestSalesSection","link","bestSeller","parent","next","rankItem","informationSection","len","arr","fieldToExtract","rankArray","indexOf","splitDimensions","from","duration","diff","toISOString","asMonths","asDays","videos","variantsSelector","productJsonMeta","colorToAsin","images","colorImages","is_current_product","findAsin","also_bought","bought","image","current_price","badges","amazon_prime","titleImg","alt","classRating","class","splitRating","sponsored_products","prime","output","description","feature_bullets","categories","answered_questions","item_available","before_price","savings_amount","savings_percent","main_image","total_images","total_videos","delivery_message","store_id","brand","sold_by","fulfilled_by","qty_per_order","amazon_сhoice","other_sellers","book_in_series","extractBookInSeries","extractOtherSellers","authors","extractAuthors","extractProductCategories","extractSponsoredProducts","extractAlsoBought","extractProductVariants","extractProductFeatures","extractProductInfromation","deliveryMessage","merchantInfo","splitSoldBy","maxOrderQty","val","toFixed","extractImages","productList","amazonChoice","amazonPrime","priceSearch","discountSearch","ratingSearch","titleThumbnailSearch","savings","thumbnail","cateogriesss","byAuthors","author","role","moreBuyingOptions","seller","imgRegex","imageGalleryData","hiRes","large","imageData","imageIdregex","series","bookSeriesName","series_name","booksInTheSeries","serie","categorySelect","select"],"mappings":"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","file":"js/app.7aff3b95.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded CSS chunks\n \tvar installedCssChunks = {\n \t\t\"app\": 0\n \t}\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-04cb68d0\":\"2d2d9f60\",\"chunk-25bfe4ba\":\"ba00eae7\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// mini-css-extract-plugin CSS loading\n \t\tvar cssChunks = {\"chunk-04cb68d0\":1,\"chunk-25bfe4ba\":1};\n \t\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n \t\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n \t\t\tpromises.push(installedCssChunks[chunkId] = new Promise(function(resolve, reject) {\n \t\t\t\tvar href = \"css/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-04cb68d0\":\"e0a78b7f\",\"chunk-25bfe4ba\":\"a1133b9d\"}[chunkId] + \".css\";\n \t\t\t\tvar fullhref = __webpack_require__.p + href;\n \t\t\t\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n \t\t\t\tfor(var i = 0; i < existingLinkTags.length; i++) {\n \t\t\t\t\tvar tag = existingLinkTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n \t\t\t\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return resolve();\n \t\t\t\t}\n \t\t\t\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n \t\t\t\tfor(var i = 0; i < existingStyleTags.length; i++) {\n \t\t\t\t\tvar tag = existingStyleTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\");\n \t\t\t\t\tif(dataHref === href || dataHref === fullhref) return resolve();\n \t\t\t\t}\n \t\t\t\tvar linkTag = document.createElement(\"link\");\n \t\t\t\tlinkTag.rel = \"stylesheet\";\n \t\t\t\tlinkTag.type = \"text/css\";\n \t\t\t\tlinkTag.onload = resolve;\n \t\t\t\tlinkTag.onerror = function(event) {\n \t\t\t\t\tvar request = event && event.target && event.target.src || fullhref;\n \t\t\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + request + \")\");\n \t\t\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n \t\t\t\t\terr.request = request;\n \t\t\t\t\tdelete installedCssChunks[chunkId]\n \t\t\t\t\tlinkTag.parentNode.removeChild(linkTag)\n \t\t\t\t\treject(err);\n \t\t\t\t};\n \t\t\t\tlinkTag.href = fullhref;\n\n \t\t\t\tvar head = document.getElementsByTagName(\"head\")[0];\n \t\t\t\thead.appendChild(linkTag);\n \t\t\t}).then(function() {\n \t\t\t\tinstalledCssChunks[chunkId] = 0;\n \t\t\t}));\n \t\t}\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/amazon-ranking-tool/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"app\">\n    <router-view/>\n  </div>\n</template>\n\n<script>\nimport AmazonScraper from \"./Amazon\";\nimport {geo, defaultItemLimit} from \"./constant\";\n\nexport default {\n  name: 'App',\n  components: {\n  },\n  data() {\n    return {\n      INIT_OPTIONS: {\n        bulk: true,\n        number: defaultItemLimit,\n        filetype: '',\n        rating: [1, 5],\n        page: 1,\n        cookie: '',\n        asyncTasks: 10,\n        sponsored: false,\n        category: 'aps',\n        cli: false,\n        sort: false,\n        discount: false,\n        reviewFilter: {\n          // Sort by recent/top reviews\n          sortBy: 'recent',\n          // Show only reviews with verified purchase\n          verifiedPurchaseOnly: false,\n          // Show only reviews with specific rating or positive/critical\n          filterByStar: '',\n          formatType: 'all_formats',\n        },\n      },\n      dbDataList: [],\n      dbKeyList: [],\n    }\n  },\n  created() {\n  },\n  mounted() {\n    // await this.checkRanking('B00C625KVE', 'tool')\n    // this.startTask()\n  },\n  methods: {\n    async startTask() {\n      // get the asin and keyword list from indexDB\n      this.dbDataList = await this.$dbOperation.dbOperation('getAll')\n      this.dbKeyList = await this.$dbOperation.dbOperation('getAllKeys')\n\n      // start the task\n      this.intervalId = setInterval(this.listLoop, 1000* 60)\n    },\n    async listLoop() {\n      for(let i = 0;i < this.dbDataList.length;i++) {\n        const asin = this.dbDataList[i]\n        let keywordList = this.dbDataList[i].keywords\n        for(let j = 0;j < keywordList.length;j++) {\n          // await this.checkRanking(asin, i, j)\n          console.log(`i: ${i}, j: ${j}`)\n        }\n      }\n    },\n    async checkRanking(asin, i, j) {\n      let options = {... this.INIT_OPTIONS}\n      options.geo = geo[options.country] ? geo[options.country] : geo['US'];\n      options.scrapeType = 'ranking';\n\n      // options.filetype = 'csv'\n      options.asyncPage = 5\n      options.bulk = true\n      options.asin = asin.asin\n      options.keyword = asin.keywords[j].keyword\n      const scraper = await new AmazonScraper(options);\n      let data = await scraper.startScraper()\n      console.log(`asin: ${asin.asin}, keyword: ${asin.keywords[j].keyword}`)\n      const that = this\n      setTimeout(function () {\n        that.$nextTick(async () => {\n          console.log(data)\n          // update the record\n          if (data.result.length > 0) {\n            console.log('put for updating')\n            let newRanking = data.result.map(item => {\n              return {\n                page: item.page,\n                index: item.index,\n                type: item.isAd ? 'ad' : 'normal',\n                time: Number((new Date().getTime() / 1000).toFixed(0))\n              }\n            })\n            asin.keywords[j].ranking.push(...newRanking)\n            const sss = await that.$dbOperation.dbOperation('put', asin, that.dbKeyList[i])\n            console.log(sss)\n          }\n        })\n      }, 1000)\n    }\n  }\n}\n</script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=10a2862c&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var map = {\n\t\"./af\": \"2bfb\",\n\t\"./af.js\": \"2bfb\",\n\t\"./ar\": \"8e73\",\n\t\"./ar-dz\": \"a356\",\n\t\"./ar-dz.js\": \"a356\",\n\t\"./ar-kw\": \"423e\",\n\t\"./ar-kw.js\": \"423e\",\n\t\"./ar-ly\": \"1cfd\",\n\t\"./ar-ly.js\": \"1cfd\",\n\t\"./ar-ma\": \"0a84\",\n\t\"./ar-ma.js\": \"0a84\",\n\t\"./ar-sa\": \"8230\",\n\t\"./ar-sa.js\": \"8230\",\n\t\"./ar-tn\": \"6d83\",\n\t\"./ar-tn.js\": \"6d83\",\n\t\"./ar.js\": \"8e73\",\n\t\"./az\": \"485c\",\n\t\"./az.js\": \"485c\",\n\t\"./be\": \"1fc1\",\n\t\"./be.js\": \"1fc1\",\n\t\"./bg\": \"84aa\",\n\t\"./bg.js\": \"84aa\",\n\t\"./bm\": \"a7fa\",\n\t\"./bm.js\": \"a7fa\",\n\t\"./bn\": \"9043\",\n\t\"./bn-bd\": \"9686\",\n\t\"./bn-bd.js\": \"9686\",\n\t\"./bn.js\": \"9043\",\n\t\"./bo\": \"d26a\",\n\t\"./bo.js\": \"d26a\",\n\t\"./br\": \"6887\",\n\t\"./br.js\": \"6887\",\n\t\"./bs\": \"2554\",\n\t\"./bs.js\": \"2554\",\n\t\"./ca\": \"d716\",\n\t\"./ca.js\": \"d716\",\n\t\"./cs\": \"3c0d\",\n\t\"./cs.js\": \"3c0d\",\n\t\"./cv\": \"03ec\",\n\t\"./cv.js\": \"03ec\",\n\t\"./cy\": \"9797\",\n\t\"./cy.js\": \"9797\",\n\t\"./da\": \"0f14\",\n\t\"./da.js\": \"0f14\",\n\t\"./de\": \"b469\",\n\t\"./de-at\": \"b3eb\",\n\t\"./de-at.js\": \"b3eb\",\n\t\"./de-ch\": \"bb71\",\n\t\"./de-ch.js\": \"bb71\",\n\t\"./de.js\": \"b469\",\n\t\"./dv\": \"598a\",\n\t\"./dv.js\": \"598a\",\n\t\"./el\": \"8d47\",\n\t\"./el.js\": \"8d47\",\n\t\"./en-au\": \"0e6b\",\n\t\"./en-au.js\": \"0e6b\",\n\t\"./en-ca\": \"3886\",\n\t\"./en-ca.js\": \"3886\",\n\t\"./en-gb\": \"39a6\",\n\t\"./en-gb.js\": \"39a6\",\n\t\"./en-ie\": \"e1d3\",\n\t\"./en-ie.js\": \"e1d3\",\n\t\"./en-il\": \"7333\",\n\t\"./en-il.js\": \"7333\",\n\t\"./en-in\": \"ec2e\",\n\t\"./en-in.js\": \"ec2e\",\n\t\"./en-nz\": \"6f50\",\n\t\"./en-nz.js\": \"6f50\",\n\t\"./en-sg\": \"b7e9\",\n\t\"./en-sg.js\": \"b7e9\",\n\t\"./eo\": \"65db\",\n\t\"./eo.js\": \"65db\",\n\t\"./es\": \"898b\",\n\t\"./es-do\": \"0a3c\",\n\t\"./es-do.js\": \"0a3c\",\n\t\"./es-mx\": \"b5b7\",\n\t\"./es-mx.js\": \"b5b7\",\n\t\"./es-us\": \"55c9\",\n\t\"./es-us.js\": \"55c9\",\n\t\"./es.js\": \"898b\",\n\t\"./et\": \"ec18\",\n\t\"./et.js\": \"ec18\",\n\t\"./eu\": \"0ff2\",\n\t\"./eu.js\": \"0ff2\",\n\t\"./fa\": \"8df4\",\n\t\"./fa.js\": \"8df4\",\n\t\"./fi\": \"81e9\",\n\t\"./fi.js\": \"81e9\",\n\t\"./fil\": \"d69a\",\n\t\"./fil.js\": \"d69a\",\n\t\"./fo\": \"0721\",\n\t\"./fo.js\": \"0721\",\n\t\"./fr\": \"9f26\",\n\t\"./fr-ca\": \"d9f8\",\n\t\"./fr-ca.js\": \"d9f8\",\n\t\"./fr-ch\": \"0e49\",\n\t\"./fr-ch.js\": \"0e49\",\n\t\"./fr.js\": \"9f26\",\n\t\"./fy\": \"7118\",\n\t\"./fy.js\": \"7118\",\n\t\"./ga\": \"5120\",\n\t\"./ga.js\": \"5120\",\n\t\"./gd\": \"f6b4\",\n\t\"./gd.js\": \"f6b4\",\n\t\"./gl\": \"8840\",\n\t\"./gl.js\": \"8840\",\n\t\"./gom-deva\": \"aaf2\",\n\t\"./gom-deva.js\": \"aaf2\",\n\t\"./gom-latn\": \"0caa\",\n\t\"./gom-latn.js\": \"0caa\",\n\t\"./gu\": \"e0c5\",\n\t\"./gu.js\": \"e0c5\",\n\t\"./he\": \"c7aa\",\n\t\"./he.js\": \"c7aa\",\n\t\"./hi\": \"dc4d\",\n\t\"./hi.js\": \"dc4d\",\n\t\"./hr\": \"4ba9\",\n\t\"./hr.js\": \"4ba9\",\n\t\"./hu\": \"5b14\",\n\t\"./hu.js\": \"5b14\",\n\t\"./hy-am\": \"d6b6\",\n\t\"./hy-am.js\": \"d6b6\",\n\t\"./id\": \"5038\",\n\t\"./id.js\": \"5038\",\n\t\"./is\": \"0558\",\n\t\"./is.js\": \"0558\",\n\t\"./it\": \"6e98\",\n\t\"./it-ch\": \"6f12\",\n\t\"./it-ch.js\": \"6f12\",\n\t\"./it.js\": \"6e98\",\n\t\"./ja\": \"079e\",\n\t\"./ja.js\": \"079e\",\n\t\"./jv\": \"b540\",\n\t\"./jv.js\": \"b540\",\n\t\"./ka\": \"201b\",\n\t\"./ka.js\": \"201b\",\n\t\"./kk\": \"6d79\",\n\t\"./kk.js\": \"6d79\",\n\t\"./km\": \"e81d\",\n\t\"./km.js\": \"e81d\",\n\t\"./kn\": \"3e92\",\n\t\"./kn.js\": \"3e92\",\n\t\"./ko\": \"22f8\",\n\t\"./ko.js\": \"22f8\",\n\t\"./ku\": \"2421\",\n\t\"./ku.js\": \"2421\",\n\t\"./ky\": \"9609\",\n\t\"./ky.js\": \"9609\",\n\t\"./lb\": \"440c\",\n\t\"./lb.js\": \"440c\",\n\t\"./lo\": \"b29d\",\n\t\"./lo.js\": \"b29d\",\n\t\"./lt\": \"26f9\",\n\t\"./lt.js\": \"26f9\",\n\t\"./lv\": \"b97c\",\n\t\"./lv.js\": \"b97c\",\n\t\"./me\": \"293c\",\n\t\"./me.js\": \"293c\",\n\t\"./mi\": \"688b\",\n\t\"./mi.js\": \"688b\",\n\t\"./mk\": \"6909\",\n\t\"./mk.js\": \"6909\",\n\t\"./ml\": \"02fb\",\n\t\"./ml.js\": \"02fb\",\n\t\"./mn\": \"958b\",\n\t\"./mn.js\": \"958b\",\n\t\"./mr\": \"39bd\",\n\t\"./mr.js\": \"39bd\",\n\t\"./ms\": \"ebe4\",\n\t\"./ms-my\": \"6403\",\n\t\"./ms-my.js\": \"6403\",\n\t\"./ms.js\": \"ebe4\",\n\t\"./mt\": \"1b45\",\n\t\"./mt.js\": \"1b45\",\n\t\"./my\": \"8689\",\n\t\"./my.js\": \"8689\",\n\t\"./nb\": \"6ce3\",\n\t\"./nb.js\": \"6ce3\",\n\t\"./ne\": \"3a39\",\n\t\"./ne.js\": \"3a39\",\n\t\"./nl\": \"facd\",\n\t\"./nl-be\": \"db29\",\n\t\"./nl-be.js\": \"db29\",\n\t\"./nl.js\": \"facd\",\n\t\"./nn\": \"b84c\",\n\t\"./nn.js\": \"b84c\",\n\t\"./oc-lnc\": \"167b\",\n\t\"./oc-lnc.js\": \"167b\",\n\t\"./pa-in\": \"f3ff\",\n\t\"./pa-in.js\": \"f3ff\",\n\t\"./pl\": \"8d57\",\n\t\"./pl.js\": \"8d57\",\n\t\"./pt\": \"f260\",\n\t\"./pt-br\": \"d2d4\",\n\t\"./pt-br.js\": \"d2d4\",\n\t\"./pt.js\": \"f260\",\n\t\"./ro\": \"972c\",\n\t\"./ro.js\": \"972c\",\n\t\"./ru\": \"957c\",\n\t\"./ru.js\": \"957c\",\n\t\"./sd\": \"6784\",\n\t\"./sd.js\": \"6784\",\n\t\"./se\": \"ffff\",\n\t\"./se.js\": \"ffff\",\n\t\"./si\": \"eda5\",\n\t\"./si.js\": \"eda5\",\n\t\"./sk\": \"7be6\",\n\t\"./sk.js\": \"7be6\",\n\t\"./sl\": \"8155\",\n\t\"./sl.js\": \"8155\",\n\t\"./sq\": \"c8f3\",\n\t\"./sq.js\": \"c8f3\",\n\t\"./sr\": \"cf1e\",\n\t\"./sr-cyrl\": \"13e9\",\n\t\"./sr-cyrl.js\": \"13e9\",\n\t\"./sr.js\": \"cf1e\",\n\t\"./ss\": \"52bd\",\n\t\"./ss.js\": \"52bd\",\n\t\"./sv\": \"5fbd\",\n\t\"./sv.js\": \"5fbd\",\n\t\"./sw\": \"74dc\",\n\t\"./sw.js\": \"74dc\",\n\t\"./ta\": \"3de5\",\n\t\"./ta.js\": \"3de5\",\n\t\"./te\": \"5cbb\",\n\t\"./te.js\": \"5cbb\",\n\t\"./tet\": \"576c\",\n\t\"./tet.js\": \"576c\",\n\t\"./tg\": \"3b1b\",\n\t\"./tg.js\": \"3b1b\",\n\t\"./th\": \"10e8\",\n\t\"./th.js\": \"10e8\",\n\t\"./tk\": \"5aff\",\n\t\"./tk.js\": \"5aff\",\n\t\"./tl-ph\": \"0f38\",\n\t\"./tl-ph.js\": \"0f38\",\n\t\"./tlh\": \"cf75\",\n\t\"./tlh.js\": \"cf75\",\n\t\"./tr\": \"0e81\",\n\t\"./tr.js\": \"0e81\",\n\t\"./tzl\": \"cf51\",\n\t\"./tzl.js\": \"cf51\",\n\t\"./tzm\": \"c109\",\n\t\"./tzm-latn\": \"b53d\",\n\t\"./tzm-latn.js\": \"b53d\",\n\t\"./tzm.js\": \"c109\",\n\t\"./ug-cn\": \"6117\",\n\t\"./ug-cn.js\": \"6117\",\n\t\"./uk\": \"ada2\",\n\t\"./uk.js\": \"ada2\",\n\t\"./ur\": \"5294\",\n\t\"./ur.js\": \"5294\",\n\t\"./uz\": \"2e8c\",\n\t\"./uz-latn\": \"010e\",\n\t\"./uz-latn.js\": \"010e\",\n\t\"./uz.js\": \"2e8c\",\n\t\"./vi\": \"2921\",\n\t\"./vi.js\": \"2921\",\n\t\"./x-pseudo\": \"fd7e\",\n\t\"./x-pseudo.js\": \"fd7e\",\n\t\"./yo\": \"7f33\",\n\t\"./yo.js\": \"7f33\",\n\t\"./zh-cn\": \"5c3a\",\n\t\"./zh-cn.js\": \"5c3a\",\n\t\"./zh-hk\": \"49ab\",\n\t\"./zh-hk.js\": \"49ab\",\n\t\"./zh-mo\": \"3a6c\",\n\t\"./zh-mo.js\": \"3a6c\",\n\t\"./zh-tw\": \"90ea\",\n\t\"./zh-tw.js\": \"90ea\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"4678\";","let typeList = ['add', 'get', 'put', 'getAll', 'getAllKeys', 'delete']\n\nconst instance = {\n    dbOperation: async function (type, data, key) {\n        if (!typeList.includes(type)) {\n            throw new Error(`操作类型错误, 仅支持: ${typeList.toString()} 方法`)\n        }\n        const readType = type === 'add' || type === 'put'|| type === 'delete' ? 'readwrite' : 'readonly'\n        const res = await this.dbInit()\n        const objectStore = res.transaction('asin', readType).objectStore('asin')\n        const response = new Promise((resolve, reject) => {\n            let request\n                // = type === 'getAll' || type === 'getAllKeys' ? objectStore[type](): objectStore[type](data)\n            switch (type) {\n                case 'add':\n                    request = objectStore[type](data)\n                    break;\n                case 'get':\n                    request = objectStore[type](data)\n                    break;\n                case 'put':\n                    request = objectStore[type](data, key)\n                    break;\n                case 'getAll':\n                    request = objectStore[type]()\n                    break;\n                case 'getAllKeys':\n                    request = objectStore[type]()\n                    break;\n                case 'delete':\n                    request = objectStore[type](key)\n                    break;\n            }\n            request.onsuccess = (res) => {\n                resolve(res.target.result)\n            }\n            request.onerror = (err) => {\n                reject(err)\n            }\n        })\n        return response\n    },\n    dbInit: function () {\n        return new Promise((resolve, reject) => {\n            const connection = window.indexedDB.open('data', 1)\n            connection.onsuccess = function (event) {\n                resolve(event.target.result)\n            }\n            connection.onupgradeneeded = function (event) {\n                const db = event.target.result\n                if (!db.objectStoreNames.contains('asin')) {\n                    db.createObjectStore('asin', {autoIncrement: true})\n                }\n            }\n            connection.onerror = function (err) {\n                reject(err)\n            }\n        })\n    },\n}\n\nexport default instance\n","import Vue from 'vue'\nimport VueRouter from 'vue-router'\n\nVue.use(VueRouter)\n\n/*配置路由*/\nconst routes = [\n\n    {\n        path: '/',\n        name: 'root',\n        component: () => import('./App'),\n        redirect: () => {\n            return {name: 'home'}\n        },\n        children: [\n            {\n                path: 'home',\n                name: 'home',\n                component: () => import('./components/Home'),\n            },\n            {\n                path: 'keyword',\n                name: 'keyword',\n                component: () => import('./components/Keyword'),\n            }\n        ]\n    }\n];\n\n/*实例化路由*/\nconst router = new VueRouter({\n    mode: \"hash\",   //模式修改\n    routes // （简写）相当于 routes: routes\n});\nexport default router\n","import Vue from 'vue'\nimport App from './App.vue'\nimport dbOperation from \"@/dbOperation\";\nimport ElementUI from 'element-ui';\nimport 'element-ui/lib/theme-chalk/index.css';\nimport router from './router';\nVue.config.productionTip = false\n\nVue.use(ElementUI);\n\nVue.prototype.$dbOperation= dbOperation\n\nnew Vue({\n  router,\n  render: h => h(App),\n}).$mount('#app')\n","const moment = require('moment');\n\nmodule.exports = {\n    limit: {\n        product: 1000,\n        reviews: 20000,\n    },\n    defaultItemLimit: 15,\n    reviewFilter: {\n        sortBy: {\n            recent: 'recent',\n            helpful: 'helpful',\n        },\n        filterByStar: {\n            positive: 'positive',\n            critical: 'critical',\n            1: 'one_star',\n            2: 'two_star',\n            3: 'three_star',\n            4: 'four_star',\n            5: 'five_star',\n        },\n        formatType: {\n            all_formats: 'all_formats',\n            current_format: 'current_format',\n        },\n    },\n    geo: {\n        US: {\n            country: 'United States of America',\n            currency: 'USD',\n            symbol: '$',\n            host: 'www.amazon.com',\n            variants: {\n                split_text: 'Click to select ',\n            },\n            best_seller: (text) => {\n                if (text) {\n                    const match = text.match(/(#[\\d,|]+) in[\\s\\n ]([\\w&'\\s]+)/);\n                    if (match) {\n                        return { rank: parseInt(match[1].replace(/[^\\d]/g, '')), category: match[2].trim() };\n                    }\n                }\n                return '';\n            },\n            review_date: (date) => {\n                const dateRegex = /on (.+)$/.exec(date);\n                if (dateRegex) {\n                    return {\n                        date: dateRegex[1],\n                        unix: moment(new Date(`${dateRegex[1]} 02:00:00`))\n                            .utc()\n                            .unix(),\n                    };\n                }\n                return '';\n            },\n            price_format: (price) => {\n                const formatedPrice = price.replace(/[^\\d+\\.]/g, '');\n                return parseFloat(formatedPrice);\n            },\n            product_information: {\n                id: [\n                    '#detailBullets_feature_div > ul',\n                    '#productDetails_detailBullets_sections1',\n                    '#productDetails_techSpec_section_1',\n                    '#productDetails_techSpec_section_2',\n                    '#detailBulletsWrapper_feature_div > ul:nth-child(5)',\n                ],\n                fields: {\n                    'Amazon Best Sellers Rank': { key: '', rank: true },\n                    'Best-sellers rank': { key: '', rank: true },\n                    'Best Sellers Rank': { key: '', rank: true },\n                    'Package Dimensions': { key: 'dimensions' },\n                    'Product Dimensions': { key: 'dimensions' },\n                    'Parcel Dimensions': { key: 'dimensions' },\n                    'Item Weight': { key: 'weight' },\n                    Manufacturer: { key: 'manufacturer' },\n                    'Release date': { key: 'available_from' },\n                    'Date First Available': { key: 'available_from' },\n                    'Item model number': { key: 'model_number' },\n                    Department: { key: 'department' },\n                    Language: { key: 'language' },\n                    Publisher: { key: 'publisher' },\n                    'Reading level': { key: 'reading_level' },\n                    'Grade Level': { key: 'grade_level' },\n                    Hardcover: { key: 'hardcover' },\n                    Paperback: { key: 'paperback' },\n                    'ISBN-10': { key: 'ISBN-10' },\n                    'ISBN-13': { key: 'ISBN-13' },\n                },\n            },\n        },\n        AU: {\n            country: 'Australia',\n            currency: 'AUD',\n            symbol: '$',\n            host: 'www.amazon.com.au',\n            variants: {\n                split_text: 'Click to select ',\n            },\n            best_seller: (text) => {\n                if (text) {\n                    const match = text.match(/(#[\\d,|]+) in[\\s\\n ]([\\w&'\\s]+)/);\n                    if (match) {\n                        return { rank: parseInt(match[1].replace(/[^\\d]/g, '')), category: match[2].trim() };\n                    }\n                }\n                return '';\n            },\n            review_date: (date) => {\n                const dateRegex = /on (.+)$/.exec(date);\n                if (dateRegex) {\n                    return {\n                        date: dateRegex[1],\n                        unix: moment(new Date(`${dateRegex[1]} 02:00:00`))\n                            .utc()\n                            .unix(),\n                    };\n                }\n                return '';\n            },\n            price_format: (price) => {\n                const formatedPrice = price.replace(/[^\\d+\\.]/g, '');\n                return parseFloat(formatedPrice);\n            },\n            product_information: {\n                id: [\n                    '#detailBullets_feature_div > ul',\n                    '#productDetails_detailBullets_sections1',\n                    '#productDetails_techSpec_section_1',\n                    '#productDetails_techSpec_section_2',\n                    '#detailBulletsWrapper_feature_div > ul:nth-child(5)',\n                ],\n                fields: {\n                    'Amazon Best Sellers Rank': { key: '', rank: true },\n                    'Best-sellers rank': { key: '', rank: true },\n                    'Best Sellers Rank': { key: '', rank: true },\n                    'Package Dimensions': { key: 'dimensions' },\n                    'Product Dimensions': { key: 'dimensions' },\n                    'Parcel Dimensions': { key: 'dimensions' },\n                    'Item Weight': { key: 'weight' },\n                    Manufacturer: { key: 'manufacturer' },\n                    'Release date': { key: 'available_from' },\n                    'Date First Available': { key: 'available_from' },\n                    'Item model number': { key: 'model_number' },\n                    Department: { key: 'department' },\n                },\n            },\n        },\n        BR: {\n            country: 'Brazil',\n            currency: 'BRL',\n            symbol: 'R$',\n            host: 'www.amazon.com.br',\n            variants: {\n                split_text: 'Click to select ',\n            },\n            best_seller: (text) => {\n                if (text) {\n                    const match = text.match(/(#[\\d,|]+) in[\\s\\n ]([\\w&'\\s]+)/);\n                    if (match) {\n                        return { rank: parseInt(match[1].replace(/[^\\d]/g, '')), category: match[2].trim() };\n                    }\n                }\n                return '';\n            },\n            review_date: (date) => {\n                const dateRegex = /on (.+)$/.exec(date);\n                if (dateRegex) {\n                    return {\n                        date: dateRegex[1],\n                        unix: moment(new Date(`${dateRegex[1]} 02:00:00`))\n                            .utc()\n                            .unix(),\n                    };\n                }\n                return '';\n            },\n            price_format: (price) => {\n                const formatedPrice = price.replace(/[^\\d+\\,]/g, '');\n                return parseFloat(formatedPrice.replace(/,/g, '.'));\n            },\n            product_information: {\n                // <<------ NOT CORRECT! Requires translation of the {fields} key values. I don't have much time to do it\n                id: [\n                    '#detailBullets_feature_div > ul',\n                    '#productDetails_detailBullets_sections1',\n                    '#productDetails_techSpec_section_1',\n                    '#productDetails_techSpec_section_2',\n                    '#detailBulletsWrapper_feature_div > ul:nth-child(5)',\n                ],\n                fields: {\n                    'Amazon Best Sellers Rank': { key: '', rank: true },\n                    'Best-sellers rank': { key: '', rank: true },\n                    'Best Sellers Rank': { key: '', rank: true },\n                    'Package Dimensions': { key: 'dimensions' },\n                    'Product Dimensions': { key: 'dimensions' },\n                    'Parcel Dimensions': { key: 'dimensions' },\n                    'Item Weight': { key: 'weight' },\n                    Manufacturer: { key: 'manufacturer' },\n                    'Release date': { key: 'available_from' },\n                    'Date First Available': { key: 'available_from' },\n                    'Item model number': { key: 'model_number' },\n                    Department: { key: 'department' },\n                },\n            },\n        },\n        CA: {\n            country: 'Canada',\n            currency: 'CAD',\n            symbol: '$',\n            host: 'www.amazon.ca',\n            variants: {\n                split_text: 'Click to select ',\n            },\n            best_seller: (text) => {\n                if (text) {\n                    const match = text.match(/(#[\\d,|]+) in[\\s\\n ]([\\w&'\\s]+)/);\n                    if (match) {\n                        return { rank: parseInt(match[1].replace(/[^\\d]/g, '')), category: match[2].trim() };\n                    }\n                }\n                return '';\n            },\n            review_date: (date) => {\n                const dateRegex = /on (.+)$/.exec(date);\n                if (dateRegex) {\n                    return {\n                        date: dateRegex[1],\n                        unix: moment(new Date(`${dateRegex[1]} 02:00:00`))\n                            .utc()\n                            .unix(),\n                    };\n                }\n                return '';\n            },\n            price_format: (price) => {\n                const formatedPrice = price.replace(/[^\\d+\\.]/g, '');\n                return parseFloat(formatedPrice);\n            },\n            product_information: {\n                id: [\n                    '#detailBullets_feature_div > ul',\n                    '#productDetails_detailBullets_sections1',\n                    '#productDetails_techSpec_section_1',\n                    '#productDetails_techSpec_section_2',\n                    '#detailBulletsWrapper_feature_div > ul:nth-child(5)',\n                ],\n                fields: {\n                    'Amazon Best Sellers Rank': { key: '', rank: true },\n                    'Best-sellers rank': { key: '', rank: true },\n                    'Best Sellers Rank': { key: '', rank: true },\n                    'Package Dimensions': { key: 'dimensions' },\n                    'Product Dimensions': { key: 'dimensions' },\n                    'Parcel Dimensions': { key: 'dimensions' },\n                    'Item Weight': { key: 'weight' },\n                    Manufacturer: { key: 'manufacturer' },\n                    'Release date': { key: 'available_from' },\n                    'Date First Available': { key: 'available_from' },\n                    'Item model number': { key: 'model_number' },\n                    Department: { key: 'department' },\n                },\n            },\n        },\n        CN: {\n            country: 'China',\n            currency: 'CNY',\n            host: 'www.amazon.cn',\n            symbol: '¥',\n            variants: {\n                split_text: 'Click to select ',\n            },\n            best_seller: (text) => {\n                if (text) {\n                    const match = text.match(/(#[\\d,|]+) in[\\s\\n ]([\\w&'\\s]+)/);\n                    if (match) {\n                        return { rank: parseInt(match[1].replace(/[^\\d]/g, '')), category: match[2].trim() };\n                    }\n                }\n                return '';\n            },\n            review_date: (date) => {\n                const dateRegex = /on (.+)$/.exec(date);\n                if (dateRegex) {\n                    return {\n                        date: dateRegex[1],\n                        unix: moment(new Date(`${dateRegex[1]} 02:00:00`))\n                            .utc()\n                            .unix(),\n                    };\n                }\n                return '';\n            },\n            price_format: (price) => {\n                const formatedPrice = price.replace(/[^\\d+\\.]/g, '');\n                return parseFloat(formatedPrice);\n            },\n            product_information: {\n                id: [\n                    '#detailBullets_feature_div > ul',\n                    '#productDetails_detailBullets_sections1',\n                    '#productDetails_techSpec_section_1',\n                    '#productDetails_techSpec_section_2',\n                    '#detailBulletsWrapper_feature_div > ul:nth-child(5)',\n                ],\n                fields: {\n                    'Amazon Best Sellers Rank': { key: '', rank: true },\n                    'Best-sellers rank': { key: '', rank: true },\n                    'Best Sellers Rank': { key: '', rank: true },\n                    商品尺寸: { key: 'dimensions' },\n                    商品重量: { key: 'weight' },\n                    制造商: { key: 'manufacturer' },\n                },\n            },\n        },\n        FR: {\n            country: 'France',\n            currency: 'EUR',\n            host: 'www.amazon.fr',\n            symbol: '€',\n            variants: {\n                split_text: 'Click to select ',\n            },\n            best_seller: (text) => {\n                if (text) {\n                    const match = text.match(/(#[\\d,|]+) in[\\s\\n ]([\\w&'\\s]+)/);\n                    if (match) {\n                        return { rank: parseInt(match[1].replace(/[^\\d]/g, '')), category: match[2].trim() };\n                    }\n                }\n                return '';\n            },\n            review_date: (date) => {\n                const dateRegex = /on (.+)$/.exec(date);\n                if (dateRegex) {\n                    return {\n                        date: dateRegex[1],\n                        unix: moment(new Date(`${dateRegex[1]} 02:00:00`))\n                            .utc()\n                            .unix(),\n                    };\n                }\n                return '';\n            },\n            price_format: (price) => {\n                const formatedPrice = price.replace(/[^\\d+\\,]/g, '').replace(',', '.');\n                return parseFloat(formatedPrice);\n            },\n            product_information: {\n                // <<------ NOT CORRECT! Requires translation of the {fields} key values. I don't have much time to do it\n                id: [\n                    '#detailBullets_feature_div > ul',\n                    '#productDetails_detailBullets_sections1',\n                    '#productDetails_techSpec_section_1',\n                    '#productDetails_techSpec_section_2',\n                    '#detailBulletsWrapper_feature_div > ul:nth-child(5)',\n                ],\n                fields: {\n                    'Amazon Best Sellers Rank': { key: '', rank: true },\n                    'Best-sellers rank': { key: '', rank: true },\n                    'Best Sellers Rank': { key: '', rank: true },\n                    'Package Dimensions': { key: 'dimensions' },\n                    'Product Dimensions': { key: 'dimensions' },\n                    'Parcel Dimensions': { key: 'dimensions' },\n                    'Item Weight': { key: 'weight' },\n                    Manufacturer: { key: 'manufacturer' },\n                    'Release date': { key: 'available_from' },\n                    'Date First Available': { key: 'available_from' },\n                    'Item model number': { key: 'model_number' },\n                    Department: { key: 'department' },\n                },\n            },\n        },\n        DE: {\n            country: 'Germany',\n            currency: 'EUR',\n            host: 'www.amazon.de',\n            symbol: '€',\n            variants: {\n                split_text: 'Click to select ',\n            },\n            best_seller: (text) => {\n                if (text) {\n                    const match = text.match(/(#[\\d,|]+) in[\\s\\n ]([\\w&'\\s]+)/);\n                    if (match) {\n                        return { rank: parseInt(match[1].replace(/[^\\d]/g, '')), category: match[2].trim() };\n                    }\n                }\n                return '';\n            },\n            review_date: (date) => {\n                const dateRegex = /on (.+)$/.exec(date);\n                if (dateRegex) {\n                    return {\n                        date: dateRegex[1],\n                        unix: moment(new Date(`${dateRegex[1]} 02:00:00`))\n                            .utc()\n                            .unix(),\n                    };\n                }\n                return '';\n            },\n            price_format: (price) => {\n                const formatedPrice = price.replace(/[^\\d+\\.]/g, '');\n                return parseFloat(formatedPrice);\n            },\n            product_information: {\n                // <<------ NOT CORRECT! Requires translation of the {fields} key values. I don't have much time to do it\n                id: [\n                    '#detailBullets_feature_div > ul',\n                    '#productDetails_detailBullets_sections1',\n                    '#productDetails_techSpec_section_1',\n                    '#productDetails_techSpec_section_2',\n                    '#detailBulletsWrapper_feature_div > ul:nth-child(5)',\n                ],\n                fields: {\n                    'Amazon Best Sellers Rank': { key: '', rank: true },\n                    'Best-sellers rank': { key: '', rank: true },\n                    'Best Sellers Rank': { key: '', rank: true },\n                    'Package Dimensions': { key: 'dimensions' },\n                    'Product Dimensions': { key: 'dimensions' },\n                    'Parcel Dimensions': { key: 'dimensions' },\n                    'Item Weight': { key: 'weight' },\n                    Manufacturer: { key: 'manufacturer' },\n                    'Release date': { key: 'available_from' },\n                    'Date First Available': { key: 'available_from' },\n                    'Item model number': { key: 'model_number' },\n                    Department: { key: 'department' },\n                },\n            },\n        },\n        IN: {\n            country: 'India',\n            currency: 'INR',\n            host: 'www.amazon.in',\n            symbol: '₹',\n            variants: {\n                split_text: 'Click to select ',\n            },\n            best_seller: (text) => {\n                if (text) {\n                    const match = text.match(/(#[\\d,|]+) in[\\s\\n ]([\\w&'\\s]+)/);\n                    if (match) {\n                        return { rank: parseInt(match[1].replace(/[^\\d]/g, '')), category: match[2].trim() };\n                    }\n                }\n                return '';\n            },\n            review_date: (date) => {\n                const dateRegex = /on (.+)$/.exec(date);\n                if (dateRegex) {\n                    return {\n                        date: dateRegex[1],\n                        unix: moment(new Date(`${dateRegex[1]} 02:00:00`))\n                            .utc()\n                            .unix(),\n                    };\n                }\n                return '';\n            },\n            price_format: (price) => {\n                const formatedPrice = price.replace(/[^\\d+\\.]/g, '');\n                return parseFloat(formatedPrice);\n            },\n            product_information: {\n                // <<------ NOT CORRECT! Requires translation of the {fields} key values. I don't have much time to do it\n                id: [\n                    '#detailBullets_feature_div > ul',\n                    '#productDetails_detailBullets_sections1',\n                    '#productDetails_techSpec_section_1',\n                    '#productDetails_techSpec_section_2',\n                    '#detailBulletsWrapper_feature_div > ul:nth-child(5)',\n                ],\n                fields: {\n                    'Amazon Best Sellers Rank': { key: '', rank: true },\n                    'Best-sellers rank': { key: '', rank: true },\n                    'Best Sellers Rank': { key: '', rank: true },\n                    'Package Dimensions': { key: 'dimensions' },\n                    'Product Dimensions': { key: 'dimensions' },\n                    'Parcel Dimensions': { key: 'dimensions' },\n                    'Item Weight': { key: 'weight' },\n                    Manufacturer: { key: 'manufacturer' },\n                    'Release date': { key: 'available_from' },\n                    'Date First Available': { key: 'available_from' },\n                    'Item model number': { key: 'model_number' },\n                    Department: { key: 'department' },\n                },\n            },\n        },\n        IT: {\n            country: 'Italy',\n            currency: 'EUR',\n            host: 'www.amazon.it',\n            symbol: '€',\n            variants: {\n                split_text: 'Click to select ',\n            },\n            best_seller: (text) => {\n                if (text) {\n                    const match = text.match(/(#[\\d,|]+) in[\\s\\n ]([\\w&'\\s]+)/);\n                    if (match) {\n                        return { rank: parseInt(match[1].replace(/[^\\d]/g, '')), category: match[2].trim() };\n                    }\n                }\n                return '';\n            },\n            review_date: (date) => {\n                const dateRegex = /on (.+)$/.exec(date);\n                if (dateRegex) {\n                    return {\n                        date: dateRegex[1],\n                        unix: moment(new Date(`${dateRegex[1]} 02:00:00`))\n                            .utc()\n                            .unix(),\n                    };\n                }\n                return '';\n            },\n            price_format: (price) => {\n                const formatedPrice = price.replace(/[^\\d+\\,]/g, '').replace(',', '.');\n                return parseFloat(formatedPrice);\n            },\n            product_information: {\n                // <<------ NOT CORRECT! Requires translation of the {fields} key values. I don't have much time to do it\n                id: [\n                    '#detailBullets_feature_div > ul',\n                    '#productDetails_detailBullets_sections1',\n                    '#productDetails_techSpec_section_1',\n                    '#productDetails_techSpec_section_2',\n                    '#detailBulletsWrapper_feature_div > ul:nth-child(5)',\n                ],\n                fields: {\n                    'Amazon Best Sellers Rank': { key: '', rank: true },\n                    'Best-sellers rank': { key: '', rank: true },\n                    'Best Sellers Rank': { key: '', rank: true },\n                    'Package Dimensions': { key: 'dimensions' },\n                    'Product Dimensions': { key: 'dimensions' },\n                    'Parcel Dimensions': { key: 'dimensions' },\n                    'Item Weight': { key: 'weight' },\n                    Manufacturer: { key: 'manufacturer' },\n                    'Release date': { key: 'available_from' },\n                    'Date First Available': { key: 'available_from' },\n                    'Item model number': { key: 'model_number' },\n                    Department: { key: 'department' },\n                },\n            },\n        },\n        MX: {\n            country: 'Mexico',\n            currency: 'MXN',\n            host: 'www.amazon.com.mx',\n            symbol: 'M$',\n            review_date: (date) => {\n                const dateRegex = /on (.+)$/.exec(date);\n                if (dateRegex) {\n                    return {\n                        date: dateRegex[1],\n                        unix: moment(new Date(`${dateRegex[1]} 02:00:00`))\n                            .utc()\n                            .unix(),\n                    };\n                }\n                return '';\n            },\n            price_format: (price) => {\n                const formatedPrice = price.replace(/[^\\d+\\.]/g, '');\n                return parseFloat(formatedPrice);\n            },\n            variants: {\n                split_text: 'Click to select ',\n            },\n            best_seller: (text) => {\n                if (text) {\n                    const match = text.match(/(#[\\d,|]+) in[\\s\\n ]([\\w&'\\s]+)/);\n                    if (match) {\n                        return { rank: parseInt(match[1].replace(/[^\\d]/g, '')), category: match[2].trim() };\n                    }\n                }\n                return '';\n            },\n            product_information: {\n                // <<------ NOT CORRECT! Requires translation of the {fields} key values. I don't have much time to do it\n                id: [\n                    '#detailBullets_feature_div > ul',\n                    '#productDetails_detailBullets_sections1',\n                    '#productDetails_techSpec_section_1',\n                    '#productDetails_techSpec_section_2',\n                    '#detailBulletsWrapper_feature_div > ul:nth-child(5)',\n                ],\n                fields: {\n                    'Amazon Best Sellers Rank': { key: '', rank: true },\n                    'Best-sellers rank': { key: '', rank: true },\n                    'Best Sellers Rank': { key: '', rank: true },\n                    'Package Dimensions': { key: 'dimensions' },\n                    'Product Dimensions': { key: 'dimensions' },\n                    'Parcel Dimensions': { key: 'dimensions' },\n                    'Item Weight': { key: 'weight' },\n                    Manufacturer: { key: 'manufacturer' },\n                    'Release date': { key: 'available_from' },\n                    'Date First Available': { key: 'available_from' },\n                    'Item model number': { key: 'model_number' },\n                    Department: { key: 'department' },\n                },\n            },\n        },\n        NL: {\n            country: 'Netherlands',\n            currency: 'EUR',\n            host: 'www.amazon.nl',\n            symbol: '€',\n            review_date: (date) => {\n                const dateRegex = /on (.+)$/.exec(date);\n                if (dateRegex) {\n                    return {\n                        date: dateRegex[1],\n                        unix: moment(new Date(`${dateRegex[1]} 02:00:00`))\n                            .utc()\n                            .unix(),\n                    };\n                }\n                return '';\n            },\n            price_format: (price) => {\n                const formatedPrice = price.replace(/[^\\d+\\,]/g, '').replace(',', '.');\n                return parseFloat(formatedPrice);\n            },\n            variants: {\n                split_text: 'Click to select ',\n            },\n            best_seller: (text) => {\n                if (text) {\n                    const match = text.match(/(#[\\d,|]+) in[\\s\\n ]([\\w&'\\s]+)/);\n                    if (match) {\n                        return { rank: parseInt(match[1].replace(/[^\\d]/g, '')), category: match[2].trim() };\n                    }\n                }\n                return '';\n            },\n            product_information: {\n                // <<------ NOT CORRECT! Requires translation of the {fields} key values. I don't have much time to do it\n                id: [\n                    '#detailBullets_feature_div > ul',\n                    '#productDetails_detailBullets_sections1',\n                    '#productDetails_techSpec_section_1',\n                    '#productDetails_techSpec_section_2',\n                    '#detailBulletsWrapper_feature_div > ul:nth-child(5)',\n                ],\n                fields: {\n                    'Amazon Best Sellers Rank': { key: '', rank: true },\n                    'Best-sellers rank': { key: '', rank: true },\n                    'Best Sellers Rank': { key: '', rank: true },\n                    'Package Dimensions': { key: 'dimensions' },\n                    'Product Dimensions': { key: 'dimensions' },\n                    'Parcel Dimensions': { key: 'dimensions' },\n                    'Item Weight': { key: 'weight' },\n                    Manufacturer: { key: 'manufacturer' },\n                    'Release date': { key: 'available_from' },\n                    'Date First Available': { key: 'available_from' },\n                    'Item model number': { key: 'model_number' },\n                    Department: { key: 'department' },\n                },\n            },\n        },\n        SG: {\n            country: 'Singapore',\n            currency: 'SGD',\n            host: 'www.amazon.sg',\n            symbol: '$',\n            variants: {\n                split_text: 'Click to select ',\n            },\n            best_seller: (text) => {\n                if (text) {\n                    const match = text.match(/(#[\\d,|]+) in[\\s\\n ]([\\w&'\\s]+)/);\n                    if (match) {\n                        return { rank: parseInt(match[1].replace(/[^\\d]/g, '')), category: match[2].trim() };\n                    }\n                }\n                return '';\n            },\n            review_date: (date) => {\n                const dateRegex = /on (.+)$/.exec(date);\n                if (dateRegex) {\n                    return {\n                        date: dateRegex[1],\n                        unix: moment(new Date(`${dateRegex[1]} 02:00:00`))\n                            .utc()\n                            .unix(),\n                    };\n                }\n                return '';\n            },\n            price_format: (price) => {\n                const formatedPrice = price.replace(/[^\\d+\\.]/g, '');\n                return parseFloat(formatedPrice);\n            },\n            product_information: {\n                id: [\n                    '#detailBullets_feature_div > ul',\n                    '#productDetails_detailBullets_sections1',\n                    '#productDetails_techSpec_section_1',\n                    '#productDetails_techSpec_section_2',\n                    '#detailBulletsWrapper_feature_div > ul:nth-child(5)',\n                ],\n                fields: {\n                    'Amazon Best Sellers Rank': { key: '', rank: true },\n                    'Best-sellers rank': { key: '', rank: true },\n                    'Best Sellers Rank': { key: '', rank: true },\n                    'Package Dimensions': { key: 'dimensions' },\n                    'Product Dimensions': { key: 'dimensions' },\n                    'Parcel Dimensions': { key: 'dimensions' },\n                    'Item Weight': { key: 'weight' },\n                    Manufacturer: { key: 'manufacturer' },\n                    'Release date': { key: 'available_from' },\n                    'Date First Available': { key: 'available_from' },\n                    'Item model number': { key: 'model_number' },\n                    Department: { key: 'department' },\n                },\n            },\n        },\n        ES: {\n            country: 'Spain',\n            currency: 'EUR',\n            host: 'www.amazon.es',\n            symbol: '€',\n            variants: {\n                split_text: 'Click to select ',\n            },\n            best_seller: (text) => {\n                if (text) {\n                    const match = text.match(/(#[\\d,|]+) in[\\s\\n ]([\\w&'\\s]+)/);\n                    if (match) {\n                        return { rank: parseInt(match[1].replace(/[^\\d]/g, '')), category: match[2].trim() };\n                    }\n                }\n                return '';\n            },\n            review_date: (date) => {\n                const dateRegex = /on (.+)$/.exec(date);\n                if (dateRegex) {\n                    return {\n                        date: dateRegex[1],\n                        unix: moment(new Date(`${dateRegex[1]} 02:00:00`))\n                            .utc()\n                            .unix(),\n                    };\n                }\n                return '';\n            },\n            price_format: (price) => {\n                const formatedPrice = price.replace(/[^\\d+\\,]/g, '').replace(',', '.');\n                return parseFloat(formatedPrice);\n            },\n            product_information: {\n                id: [\n                    '#detailBullets_feature_div > ul',\n                    '#productDetails_detailBullets_sections1',\n                    '#productDetails_techSpec_section_1',\n                    '#productDetails_techSpec_section_2',\n                    '#detailBulletsWrapper_feature_div > ul:nth-child(5)',\n                ],\n                fields: {\n                    'Amazon Best Sellers Rank': { key: '', rank: true },\n                    'Best-sellers rank': { key: '', rank: true },\n                    'Best Sellers Rank': { key: '', rank: true },\n                    'Dimensiones del producto': { key: 'dimensions' },\n                    Fabricante: { key: 'manufacturer' },\n                    'Producto en Amazon.es desde': { key: 'available_from' },\n                    'Item model number': { key: 'model_number' },\n                    Departamento: { key: 'department' },\n                },\n            },\n        },\n        TR: {\n            country: 'Turkey',\n            currency: 'TRY',\n            host: 'www.amazon.com.tr',\n            symbole: '₺',\n            variants: {\n                split_text: 'Click to select ',\n            },\n            best_seller: (text) => {\n                if (text) {\n                    const match = text.match(/(#[\\d,|]+) in[\\s\\n ]([\\w&'\\s]+)/);\n                    if (match) {\n                        return { rank: parseInt(match[1].replace(/[^\\d]/g, '')), category: match[2].trim() };\n                    }\n                }\n                return '';\n            },\n            review_date: (date) => {\n                const dateRegex = /on (.+)$/.exec(date);\n                if (dateRegex) {\n                    return {\n                        date: dateRegex[1],\n                        unix: moment(new Date(`${dateRegex[1]} 02:00:00`))\n                            .utc()\n                            .unix(),\n                    };\n                }\n                return '';\n            },\n            price_format: (price) => {\n                const formatedPrice = price.replace(/[^\\d+\\,]/g, '').replace(',', '.');\n                return parseFloat(formatedPrice);\n            },\n            product_information: {\n                id: [\n                    '#detailBullets_feature_div > ul',\n                    '#productDetails_detailBullets_sections1',\n                    '#productDetails_techSpec_section_1',\n                    '#productDetails_techSpec_section_2',\n                    '#detailBulletsWrapper_feature_div > ul:nth-child(5)',\n                ],\n                fields: {\n                    'Amazon Best Sellers Rank': { key: '', rank: true },\n                    'Best-sellers rank': { key: '', rank: true },\n                    'Best Sellers Rank': { key: '', rank: true },\n                    'Ürün Boyutları': { key: 'dimensions' },\n                    'Ürün Ağırlığı': { key: 'weight' },\n                    Üretici: { key: 'manufacturer' },\n                    'Satışa Sunulduğu İlk Tarih': { key: 'available_from' },\n                    'Model Numarası': { key: 'model_number' },\n                    Department: { key: 'department' },\n                },\n            },\n        },\n        AE: {\n            country: 'United Arab Emirates',\n            currency: 'AED',\n            host: 'www.amazon.ae',\n            symbol: 'د.إ',\n            variants: {\n                split_text: 'Click to select ',\n            },\n            best_seller: (text) => {\n                if (text) {\n                    const match = text.match(/(#[\\d,|]+) in[\\s\\n ]([\\w&'\\s]+)/);\n                    if (match) {\n                        return { rank: parseInt(match[1].replace(/[^\\d]/g, '')), category: match[2].trim() };\n                    }\n                }\n                return '';\n            },\n            review_date: (date) => {\n                const dateRegex = /on (.+)$/.exec(date);\n                if (dateRegex) {\n                    return {\n                        date: dateRegex[1],\n                        unix: moment(new Date(`${dateRegex[1]} 02:00:00`))\n                            .utc()\n                            .unix(),\n                    };\n                }\n                return '';\n            },\n            price_format: (price) => {\n                const formatedPrice = price.replace(/[^\\d+\\.]/g, '');\n                return parseFloat(formatedPrice);\n            },\n            product_information: {\n                id: [\n                    '#detailBullets_feature_div > ul',\n                    '#productDetails_detailBullets_sections1',\n                    '#productDetails_techSpec_section_1',\n                    '#productDetails_techSpec_section_2',\n                    '#detailBulletsWrapper_feature_div > ul:nth-child(5)',\n                ],\n                fields: {\n                    'Amazon Best Sellers Rank': { key: '', rank: true },\n                    'Best-sellers rank': { key: '', rank: true },\n                    'Best Sellers Rank': { key: '', rank: true },\n                    'Package Dimensions': { key: 'dimensions' },\n                    'Product Dimensions': { key: 'dimensions' },\n                    'Parcel Dimensions': { key: 'dimensions' },\n                    'Item Weight': { key: 'weight' },\n                    Manufacturer: { key: 'manufacturer' },\n                    'Release date': { key: 'available_from' },\n                    'Date First Available': { key: 'available_from' },\n                    'Item model number': { key: 'model_number' },\n                    Department: { key: 'department' },\n                },\n            },\n        },\n        GB: {\n            country: 'United Kingdom',\n            currency: 'GBP',\n            host: 'www.amazon.co.uk',\n            symbol: '£',\n            variants: {\n                split_text: 'Click to select ',\n            },\n            best_seller: (text) => {\n                if (text) {\n                    const match = text.match(/(#[\\d,|]+) in[\\s\\n ]([\\w&'\\s]+)/);\n                    if (match) {\n                        return { rank: parseInt(match[1].replace(/[^\\d]/g, '')), category: match[2].trim() };\n                    }\n                }\n                return '';\n            },\n            review_date: (date) => {\n                const dateRegex = /on (.+)$/.exec(date);\n                if (dateRegex) {\n                    return {\n                        date: dateRegex[1],\n                        unix: moment(new Date(`${dateRegex[1]} 02:00:00`))\n                            .utc()\n                            .unix(),\n                    };\n                }\n                return '';\n            },\n            price_format: (price) => {\n                const formatedPrice = price.replace(/[^\\d+\\.]/g, '');\n                return parseFloat(formatedPrice);\n            },\n            product_information: {\n                id: [\n                    '#detailBullets_feature_div > ul',\n                    '#productDetails_detailBullets_sections1',\n                    '#productDetails_techSpec_section_1',\n                    '#productDetails_techSpec_section_2',\n                    '#detailBulletsWrapper_feature_div > ul:nth-child(5)',\n                ],\n                fields: {\n                    'Amazon Best Sellers Rank': { key: '', rank: true },\n                    'Best-sellers rank': { key: '', rank: true },\n                    'Best Sellers Rank': { key: '', rank: true },\n                    'Package Dimensions': { key: 'dimensions' },\n                    'Product Dimensions': { key: 'dimensions' },\n                    'Parcel Dimensions': { key: 'dimensions' },\n                    'Item Weight': { key: 'weight' },\n                    Manufacturer: { key: 'manufacturer' },\n                    'Release date': { key: 'available_from' },\n                    'Date First Available': { key: 'available_from' },\n                    'Item model number': { key: 'model_number' },\n                    Department: { key: 'department' },\n                },\n            },\n        },\n        JP: {\n            country: 'Japan',\n            currency: 'JPY',\n            host: 'www.amazon.jp',\n            symbol: '¥',\n            variants: {\n                split_text: 'Click to select ',\n            },\n            best_seller: (text) => {\n                if (text) {\n                    const match = text.match(/(#[\\d,|]+) in[\\s\\n ]([\\w&'\\s]+)/);\n                    if (match) {\n                        return { rank: parseInt(match[1].replace(/[^\\d]/g, '')), category: match[2].trim() };\n                    }\n                }\n                return '';\n            },\n            review_date: (date) => {\n                const dateRegex = /on (.+)$/.exec(date);\n                if (dateRegex) {\n                    return {\n                        date: dateRegex[1],\n                        unix: moment(new Date(`${dateRegex[1]} 02:00:00`))\n                            .utc()\n                            .unix(),\n                    };\n                }\n                return '';\n            },\n            price_format: (price) => {\n                const formatedPrice = price.replace(/[^\\d+]/g, '');\n                return parseFloat(formatedPrice);\n            },\n            product_information: {\n                id: [\n                    '#detailBullets_feature_div > ul',\n                    '#productDetails_detailBullets_sections1',\n                    '#productDetails_techSpec_section_1',\n                    '#productDetails_techSpec_section_2',\n                    '#detailBulletsWrapper_feature_div > ul:nth-child(5)',\n                ],\n                fields: {\n                    'Amazon Best Sellers Rank': { key: '', rank: true },\n                    'Best-sellers rank': { key: '', rank: true },\n                    'Best Sellers Rank': { key: '', rank: true },\n                    梱包サイズ: { key: 'dimensions' },\n                    発売日: { key: 'available_from' },\n                    商品の重量: { key: 'weight' },\n                },\n            },\n        },\n        SE: {\n            country: 'Sweden',\n            currency: 'SEK',\n            symbol: 'kr',\n            host: 'www.amazon.se',\n            variants: {\n                split_text: 'Click to select ',\n            },\n            best_seller: (text) => {\n                if (text) {\n                    const match = text.match(/(#[\\d,|]+) in[\\s\\n ]([\\w&'\\s]+)/);\n                    if (match) {\n                        return { rank: parseInt(match[1].replace(/[^\\d]/g, '')), category: match[2].trim() };\n                    }\n                }\n                return '';\n            },\n            review_date: (date) => {\n                const dateRegex = /on (.+)$/.exec(date);\n                if (dateRegex) {\n                    return {\n                        date: dateRegex[1],\n                        unix: moment(new Date(`${dateRegex[1]} 02:00:00`))\n                            .utc()\n                            .unix(),\n                    };\n                }\n                return '';\n            },\n            price_format: (price) => {\n                const formatedPrice = price.replace(/[^\\d+\\,]/g, '');\n                return parseFloat(formatedPrice.replace(/,/g, '.'));\n            },\n            product_information: {\n                // <<------ NOT CORRECT! Requires translation of the {fields} key values. I don't have much time to do it\n                id: [\n                    '#detailBullets_feature_div > ul',\n                    '#productDetails_detailBullets_sections1',\n                    '#productDetails_techSpec_section_1',\n                    '#productDetails_techSpec_section_2',\n                    '#detailBulletsWrapper_feature_div > ul:nth-child(5)',\n                ],\n                fields: {\n                    'Amazon Best Sellers Rank': { key: '', rank: true },\n                    'Best-sellers rank': { key: '', rank: true },\n                    'Best Sellers Rank': { key: '', rank: true },\n                    'Package Dimensions': { key: 'dimensions' },\n                    'Product Dimensions': { key: 'dimensions' },\n                    'Parcel Dimensions': { key: 'dimensions' },\n                    'Item Weight': { key: 'weight' },\n                    Manufacturer: { key: 'manufacturer' },\n                    'Release date': { key: 'available_from' },\n                    'Date First Available': { key: 'available_from' },\n                    'Item model number': { key: 'model_number' },\n                    Department: { key: 'department' },\n                },\n            },\n        },\n        PL: {\n            country: 'Poland',\n            currency: 'Zł',\n            symbol: 'zł',\n            host: 'www.amazon.pl',\n            variants: {\n                split_text: 'Click to select ',\n            },\n            best_seller: (text) => {\n                if (text) {\n                    const match = text.match(/(#[\\d,|]+) in[\\s\\n ]([\\w&'\\s]+)/);\n                    if (match) {\n                        return { rank: parseInt(match[1].replace(/[^\\d]/g, '')), category: match[2].trim() };\n                    }\n                }\n                return '';\n            },\n            review_date: (date) => {\n                const dateRegex = /on (.+)$/.exec(date);\n                if (dateRegex) {\n                    return {\n                        date: dateRegex[1],\n                        unix: moment(new Date(`${dateRegex[1]} 02:00:00`))\n                            .utc()\n                            .unix(),\n                    };\n                }\n                return '';\n            },\n            price_format: (price) => {\n                const formatedPrice = price.replace(/[^\\d+\\,]/g, '');\n                return parseFloat(formatedPrice.replace(/,/g, '.'));\n            },\n            product_information: {\n                // <<------ NOT CORRECT! Requires translation of the {fields} key values. I don't have much time to do it\n                id: [\n                    '#detailBullets_feature_div > ul',\n                    '#productDetails_detailBullets_sections1',\n                    '#productDetails_techSpec_section_1',\n                    '#productDetails_techSpec_section_2',\n                    '#detailBulletsWrapper_feature_div > ul:nth-child(5)',\n                ],\n                fields: {\n                    'Amazon Best Sellers Rank': { key: '', rank: true },\n                    'Best-sellers rank': { key: '', rank: true },\n                    'Best Sellers Rank': { key: '', rank: true },\n                    'Package Dimensions': { key: 'dimensions' },\n                    'Product Dimensions': { key: 'dimensions' },\n                    'Parcel Dimensions': { key: 'dimensions' },\n                    'Item Weight': { key: 'weight' },\n                    Manufacturer: { key: 'manufacturer' },\n                    'Release date': { key: 'available_from' },\n                    'Date First Available': { key: 'available_from' },\n                    'Item model number': { key: 'model_number' },\n                    Department: { key: 'department' },\n                },\n            },\n        },\n    },\n};\n","// @ts-nocheck\nconst rp = require('request-promise');\nconst { forEachLimit } = require('async');\nconst { writeFile } = require('fs');\nconst { fromCallback } = require('bluebird');\nconst cheerio = require('cheerio');\nconst { Parser } = require('json2csv');\nconst moment = require('moment');\n\nconst CONST = require('@/constant');\n\nclass AmazonScraper {\n    constructor({\n        keyword,\n        number,\n        sponsored,\n        proxy,\n        cli,\n        filetype,\n        scrapeType,\n        asin,\n        sort,\n        discount,\n        rating,\n        ua,\n        timeout,\n        randomUa,\n        page,\n        bulk,\n        category,\n        cookie,\n        geo,\n        asyncTasks,\n        reviewFilter,\n        referer,\n        asyncPage,\n    }) {\n        this.asyncTasks = asyncTasks;\n        this.asyncPage = asyncPage;\n        this.mainHost = `https://divine-bread-7a03.amazontool.workers.dev`;\n        this.geo = geo;\n        this.cookie = cookie;\n        this.bulk = bulk;\n        this.productSearchCategory = category;\n        this.collector = [];\n        this.keyword = keyword;\n        this.number = parseInt(number, 10);\n        this.searchPage = page;\n        this.sponsored = sponsored;\n        this.proxy = proxy;\n        this.cli = cli;\n        this.scrapeType = scrapeType;\n        this.asin = asin;\n        this.sort = sort;\n        this.discount = discount;\n        this.minRating = 1;\n        this.maxRating = 5;\n        this.timeout = timeout;\n        this.randomUa = randomUa;\n        this.totalProducts = 0;\n        this.reviewMetadata = {\n            total_reviews: 0,\n            stars_stat: {},\n        };\n        this.referer = referer;\n        this.fileType = filetype;\n        this.jsonToCsv = new Parser({ flatten: true });\n        this.initTime = Date.now();\n        this.ua = ua || 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.113 Safari/537.36';\n        this.reviewFilter = reviewFilter;\n        this.ranking = []\n    }\n\n    /**\n     * Get user agent\n     * if randomUa then user agent version will be randomized, this helps to prevent request blocking from the amazon side\n     */\n    get userAgent() {\n        {\n            const os = [\n                'Macintosh; Intel Mac OS X 10_15_7',\n                'Macintosh; Intel Mac OS X 10_15_5',\n                'Macintosh; Intel Mac OS X 10_11_6',\n                'Macintosh; Intel Mac OS X 10_6_6',\n                'Macintosh; Intel Mac OS X 10_9_5',\n                'Macintosh; Intel Mac OS X 10_10_5',\n                'Macintosh; Intel Mac OS X 10_7_5',\n                'Macintosh; Intel Mac OS X 10_11_3',\n                'Macintosh; Intel Mac OS X 10_10_3',\n                'Macintosh; Intel Mac OS X 10_6_8',\n                'Macintosh; Intel Mac OS X 10_10_2',\n                'Macintosh; Intel Mac OS X 10_10_3',\n                'Macintosh; Intel Mac OS X 10_11_5',\n                'Windows NT 10.0; Win64; x64',\n                'Windows NT 10.0; WOW64',\n                'Windows NT 10.0',\n            ];\n\n            return `Mozilla/5.0 (${os[Math.floor(Math.random() * os.length)]}) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/${\n                Math.floor(Math.random() * 3) + 85\n            }.0.${Math.floor(Math.random() * 190) + 4100}.${Math.floor(Math.random() * 50) + 140} Safari/537.36`;\n        }\n    }\n\n    /**\n     * Get referer method\n     * {this.referer} should an array of referers\n     */\n    get getReferer() {\n        if (Array.isArray(this.referer)) {\n            return this.referer[Math.floor(Math.random() * this.referer.length)];\n        }\n\n        return '';\n    }\n\n    /**\n     * Get proxy\n     */\n    get getProxy() {\n        return {\n            socks: false,\n            proxy: '',\n        };\n    }\n\n    /**\n     * Main request method\n     * @param {*} param0\n     */\n    httpRequest({ uri, method, qs, json, body, form }) {\n        const proxy = this.getProxy;\n        return new Promise(async (resolve, reject) => {\n            const options = {\n                uri: uri ? `${this.mainHost}/${uri}` : this.mainHost,\n                method,\n                ...(qs ? { qs } : {}),\n                ...(body ? { body } : {}),\n                ...(form ? { form } : {}),\n                headers: {\n                    'user-agent': this.userAgent,\n                    cookie: this.cookie,\n                    accept: 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8',\n                    'accept-language': 'en-US,en;q=0.9',\n                    'accept-encoding': 'gzip, deflate, br',\n                    ...(this.getReferer ? { referer: this.getReferer } : {}),\n                    ...(Math.round(Math.random()) ? { downlink: Math.floor(Math.random() * 30) + 10 } : {}),\n                    ...(Math.round(Math.random()) ? { rtt: Math.floor(Math.random() * 100) + 50 } : {}),\n                    ...(Math.round(Math.random()) ? { pragma: 'no-cache' } : {}),\n                    ...(Math.round(Math.random()) ? { ect: '4g' } : {}),\n                    ...(Math.round(Math.random()) ? { DNT: 1 } : {}),\n                },\n                strictSSL: false,\n                ...(json ? { json: true } : {}),\n                gzip: true,\n                resolveWithFullResponse: true,\n                ...(proxy.proxy && proxy.socks ? { agent: proxy.proxy } : {}),\n                ...(proxy.proxy && !proxy.socks ? { proxy: `http://${proxy.proxy}/` } : {}),\n            };\n\n            try {\n                const response = await rp(options);\n                setTimeout(() => {\n                    resolve(response);\n                }, this.timeout);\n            } catch (error) {\n                reject(error);\n            }\n        });\n    }\n\n    /**\n     * Start scraper\n     */\n\n    async startScraper() {\n        if (this.scrapeType === 'products') {\n            this.asyncPage = Math.ceil(this.number / 15);\n            if (!this.keyword) {\n                throw new Error('Keyword is missing');\n            }\n            if (this.number > CONST.limit.product) {\n                throw new Error(`Wow.... slow down cowboy. Maximum you can get is ${CONST.limit.product} products`);\n            }\n            if (typeof this.sponsored !== 'boolean') {\n                throw new Error('Sponsored can only be {true} or {false}');\n            }\n        }\n        if (this.scrapeType === 'reviews') {\n            // Get the amount of global reviews\n            const body = await this.buildRequest(1);\n            const $ = cheerio.load(body.replace(/\\s\\s+/g, '').replace(/\\n/g, ''));\n            let text = $($('#filter-info-section')[0].children[0].children[0]).text().toString()\n            let amountStr = text.split(', ')[1].split(' ')[0]\n\n            this.number = Number(amountStr.replace(/,/g,''))\n            this.asyncPage = Math.ceil(this.number / 10);\n            if (!this.asin) {\n                throw new Error('ASIN is missing');\n            }\n            if (this.number > CONST.limit.reviews) {\n                throw new Error(`Wow.... slow down cowboy. Maximum you can get is ${CONST.limit.reviews} reviews`);\n            }\n        }\n        if (this.scrapeType === 'asin') {\n            if (!this.asin) {\n                throw new Error('ASIN is missing');\n            }\n        }\n\n        await this.mainLoop();\n\n        this.sortAndFilterResult();\n\n        await this.saveResultToFile();\n\n        if (this.fileType && this.cli) {\n            console.log(`Result was saved to: ${this.fileName}`);\n        }\n        return {\n            ...(this.scrapeType === 'products' ? { totalProducts: this.totalProducts, category: this.productSearchCategory } : {}),\n            ...(this.scrapeType === 'reviews' ? { ...this.reviewMetadata } : {}),\n            result: this.collector,\n        };\n    }\n\n    /**\n     * Main loop that collects data\n     */\n    async mainLoop() {\n        return new Promise((resolve, reject) => {\n            forEachLimit(\n                // Array.from({length: this.asyncPage}, (v, i) => i + 1),\n                [1,2,3,4,5],\n                this.asyncTasks,\n                async (item) => {\n                    const body = await this.buildRequest(this.bulk ? item : this.searchPage);\n                    if (this.scrapeType === 'asin') {\n                        this.grapAsinDetails(body);\n                        throw new Error('Done');\n                    }\n                    if (this.scrapeType === 'products') {\n                        let totalResultCount = body.match(/\"totalResultCount\":\\w+(.[0-9])/gm);\n\n                        if (totalResultCount) {\n                            this.totalProducts = totalResultCount[0].split('totalResultCount\":')[1];\n                        }\n                        this.grabProduct(body, item);\n                    }\n                    if (this.scrapeType === 'reviews') {\n                        this.grabReviews(body);\n                    }\n                    if (this.scrapeType === 'ranking') {\n                        this.grabRanking(body, item)\n                    }\n                    if (!this.bulk) {\n                        throw new Error('Done');\n                    }\n                    resolve();\n                },\n                (err) => {\n                    if (err && err.message != 'Done') reject(err);\n                    resolve();\n                },\n            );\n        });\n    }\n\n    /**\n     * Get filename\n     */\n    get fileName() {\n        switch (this.scrapeType) {\n            case 'products':\n                return `${this.scrapeType}(${this.keyword})_${this.initTime}`;\n            case 'reviews':\n            case 'asin':\n                return `${this.scrapeType}(${this.asin})_${this.initTime}`;\n            default:\n                throw new Error(`Unknow scraping type: ${this.scrapeType}`);\n        }\n    }\n    /**\n     * Save results to the file\n     */\n    async saveResultToFile() {\n        if (this.collector.length) {\n            switch (this.fileType) {\n                case 'json':\n                    await fromCallback((cb) => writeFile(`${this.fileName}.json`, JSON.stringify(this.collector), cb));\n                    break;\n                case 'csv':\n                    let ee = this.fileName\n                    await fromCallback((cb) => writeFile(`${ee}.csv`, this.jsonToCsv.parse(this.collector), cb));\n                    break;\n                case 'all':\n                    await Promise.all([\n                        await fromCallback((cb) => writeFile(`${this.fileName}.json`, JSON.stringify(this.collector), cb)),\n                        await fromCallback((cb) => writeFile(`${this.fileName}.csv`, this.jsonToCsv.parse(this.collector), cb)),\n                    ]);\n                    break;\n                default:\n                    break;\n            }\n        }\n    }\n\n    /**\n     * Sort and filet the result data\n     */\n    sortAndFilterResult() {\n        if (this.scrapeType === 'reviews') {\n            if (this.sort) {\n                this.collector.sort((a, b) => b.rating - a.rating);\n            }\n        }\n        if (this.scrapeType === 'products') {\n            this.collector.sort((a, b) => a.position.global_position - b.position.global_position);\n            this.collector.forEach((item, index) => {\n                item.position.global_position = index += 1;\n            });\n\n            if (this.sort) {\n                this.collector.sort((a, b) => b.score - a.score);\n            }\n            if (this.discount) {\n                this.collector = this.collector.filter((item) => item.discounted);\n            }\n            if (this.sponsored) {\n                this.collector = this.collector.filter((item) => item.sponsored);\n            }\n        }\n        if (this.scrapeType === 'products' || this.scrapeType === 'reviews') {\n            this.collector = this.collector.filter((item) => this.validateRating(item));\n        }\n        if (this.scrapeType === 'ranking') {\n            this.collector = this.ranking\n        }\n    }\n\n    get setRequestEndpoint() {\n        switch (this.scrapeType) {\n            case 'ranking':\n                return 's';\n            case 'products':\n                return 's';\n            case 'reviews':\n                return `product-reviews/${this.asin}/ref=cm_cr_arp_d_viewopt_srt?formatType=${\n                    CONST.reviewFilter.formatType[this.reviewFilter.formatType]\n                }&sortBy=${CONST.reviewFilter.sortBy[this.reviewFilter.sortBy] ? CONST.reviewFilter.sortBy[this.reviewFilter.sortBy] : ''}${\n                    this.reviewFilter.verifiedPurchaseOnly ? '&reviewerType=avp_only_reviews' : ''\n                }${this.reviewFilter.filterByStar ? `&filterByStar=${CONST.reviewFilter.filterByStar[this.reviewFilter.filterByStar]}` : ''}`;\n            case 'asin':\n                return `dp/${this.asin}/ref=sspa_dk_detail_3&th=1&psc=1?th=1&psc=1`;\n            default:\n                return '';\n        }\n    }\n    /**\n     * Create request\n     */\n    async buildRequest(page) {\n        const options = {\n            method: 'GET',\n            uri: this.setRequestEndpoint,\n            qs: {\n                ...(this.scrapeType === 'products' || this.scrapeType === 'ranking'\n                    ? {\n                          k: this.keyword,\n                          ...(this.productSearchCategory ? { i: this.productSearchCategory } : {}),\n                          ...(page > 1 ? { page, ref: `sr_pg_${page}` } : {}),\n                      }\n                    : {}),\n                ...(this.scrapeType === 'reviews' ? { ...(page > 1 ? { pageNumber: page } : {}) } : {}),\n            },\n        };\n\n        try {\n            const response = await this.httpRequest(options);\n            return response.body;\n        } catch (error) {\n            throw error.message;\n        }\n    }\n\n    /**\n     * Get the position from the html response\n     * @param {} body\n     */\n    grabRanking(body, page) {\n        const searchAsin = this.asin\n        const $ = cheerio.load(body.replace(/\\s\\s+/g, '').replace(/\\n/g, ''));\n        const resultList = $('.s-main-slot').children().filter(function(i, el) {\n            // this === el\n            return $(this).data('asin').length > 0 && $(this).data('asin') === searchAsin;\n        }).map(function(i, el) {\n            // this === el\n            const asin = $(this).data('asin')\n            if (searchAsin === asin) {\n                return {\n                    page,\n                    index: $(this).data('index'),\n                    isAd: $(this).has('.a-spacing-micro').length > 0\n                }\n            }\n        })\n\n        if (resultList.length > 0) {\n            this.ranking.push(...resultList)\n        }\n    }\n\n    /**\n     * Collect reviews from the html response\n     * @param {} body\n     */\n    grabReviews(body) {\n        const $ = cheerio.load(body.replace(/\\s\\s+/g, '').replace(/\\n/g, ''));\n\n        /**\n         * Get star and star percentage\n         */\n        const reviewListStat = $('#histogramTable > tbody')[0];\n        try {\n            reviewListStat.children.forEach((item) => {\n                const star = parseInt($(item.children[0]).text(), 10);\n                const percentage = $(item.children[2]).text();\n                this.reviewMetadata.stars_stat[star] = percentage;\n            });\n        } catch {\n            return;\n        }\n\n        /**\n         * Get total number of reviews\n         */\n        this.reviewMetadata.total_reviews = parseInt($('.averageStarRatingNumerical').text(), 10);\n\n        const reviewsList = $('#cm_cr-review_list')[0].children;\n        let scrapingResult = {};\n        for (let i = 0; i < reviewsList.length; i++) {\n            const totalInResult = Object.keys(scrapingResult).length + this.collector.length;\n            if (totalInResult >= this.number && this.bulk) {\n                break;\n            }\n            const reviewId = reviewsList[i].attribs['id'];\n            if (!reviewId) {\n                continue;\n            }\n            scrapingResult[reviewId] = { id: reviewId };\n        }\n\n        /**\n         * Review date\n         */\n        for (let key in scrapingResult) {\n            const search = $(`#${key} [data-hook=\"review-date\"]`);\n\n            scrapingResult[key].asin = {\n                original: this.asin,\n                variant: '',\n            };\n            try {\n                scrapingResult[key].review_data = search[0].children[0].data;\n                if (scrapingResult[key].review_data) {\n                    scrapingResult[key].date = this.geo.review_date(scrapingResult[key].review_data);\n                }\n            } catch (error) {\n                continue;\n            }\n        }\n\n        /**\n         * If product has more then one variant and {formatType} is set to {all_formats} then some reviews can be written for specific variants(ASIN)\n         * We can extract those ASIN id's\n         */\n        for (let key in scrapingResult) {\n            const search = $(`#${key} div.a-row.a-spacing-mini.review-data.review-format-strip > a`);\n\n            try {\n                const url = search[0].attribs.href;\n                const asinRegex = /product-reviews\\/(\\w+)\\//.exec(url);\n                if (asinRegex) {\n                    scrapingResult[key].asin.variant = asinRegex[1];\n                }\n            } catch (error) {\n                continue;\n            }\n        }\n\n        /**\n         * Reviewer name\n         */\n        for (let key in scrapingResult) {\n            const search = $(`#${key} .a-profile-name`);\n\n            try {\n                scrapingResult[key].name = search[0].children[0].data;\n            } catch (error) {\n                continue;\n            }\n        }\n\n        /**\n         * Rating\n         */\n        for (let key in scrapingResult) {\n            const search = $(`#${key} [data-hook=\"review-star-rating\"]`);\n\n            try {\n                scrapingResult[key].rating = parseFloat(search[0].children[0].children[0].data.split(' ')[0]);\n            } catch (error) {\n                continue;\n            }\n        }\n\n        /**\n         * Review title\n         */\n        for (let key in scrapingResult) {\n            const search = $(`#${key} [data-hook=\"review-title\"]`);\n\n            try {\n                scrapingResult[key].title = $(search[0]).text().toString();\n            } catch (error) {\n                continue;\n            }\n        }\n\n        /**\n         * Review format\n         */\n        for (let key in scrapingResult) {\n            const search = $(`#${key} [data-hook=\"format-strip\"]`);\n            try {\n                if (search[0])\n                    search[0].children.forEach(item => {\n                        if (item.type == \"text\") {\n                            let buf = $(item).text().toString().split(':')\n                            scrapingResult[key][buf[0]] = buf[1]\n                        }\n                    })\n            } catch (error) {\n                continue;\n            }\n        }\n\n        /**\n         * Review text\n         */\n        for (let key in scrapingResult) {\n            const search = $(`#${key} [data-hook=\"review-body\"]`);\n\n            try {\n                scrapingResult[key].review = $(search[0]).text();\n            } catch (error) {\n                continue;\n            }\n        }\n\n        /**\n         * If purchase is verified\n         */\n        for (let key in scrapingResult) {\n            const search = $(`#${key} [data-reftag=\"cm_cr_arp_d_rvw_rvwer\"]`);\n            scrapingResult[key].verified_purchase = false;\n\n            try {\n                scrapingResult[key].verified_purchase = !!search[0];\n            } catch (error) {\n                continue;\n            }\n        }\n\n        for (let key in scrapingResult) {\n            this.collector.push(scrapingResult[key]);\n        }\n    }\n\n    // Extract product features\n    extractProductFeatures($) {\n        const featureBullets = [];\n\n        try {\n            const featureList = $('#feature-bullets > ul .a-list-item');\n            for (let item in featureList) {\n                if (featureList[item].children[0].data) featureBullets.push(featureList[item].children[0].data);\n            }\n        } catch {\n            // continue regardless of error\n        }\n\n        // Features on some items can be hidden with the expander tag\n        // We will try to extract them\n        try {\n            const featureListExpanded = $('#feature-bullets > div > div')[0].children[0].children;\n            for (let item of featureListExpanded) {\n                if (item.children[0].children[0].data) featureBullets.push(item.children[0].children[0].data);\n            }\n        } catch {\n            // continue regardless of error\n        }\n\n        return featureBullets;\n    }\n\n    // Extract infromation from the Product Information section\n    extractProductInfromation($) {\n        const bestsellers_rank = [];\n        const product_information = {\n            dimensions: '',\n            weight: '',\n            available_from: '',\n            available_from_utc: '',\n            available_for_months: 0,\n            available_for_days: 0,\n            manufacturer: '',\n            model_number: '',\n            department: '',\n        };\n\n        let unOrderedList = false;\n\n        try {\n            const bestSalesSection = $('#SalesRank > ul > li');\n            for (let item in bestSalesSection) {\n                const rank = $(bestSalesSection[item].children[0]).text();\n                const category = $(bestSalesSection[item].children[1]).text();\n                const link = bestSalesSection[item].children[1].children[1].attribs.href;\n                if (category && rank) {\n                    const bestSeller = this.geo.best_seller(`${rank} ${category}`);\n                    if (bestSeller) {\n                        bestsellers_rank.push({ ...bestSeller, link: `${this.mainHost}${link}` });\n                    }\n                }\n            }\n        } catch {\n            // continue regardless of error\n        }\n\n        try {\n            const bestSalesSection = $('.prodDetSectionEntry')[0].parent.children[1].children[0];\n            bestSalesSection.children.forEach((item) => {\n                const bestSeller = this.geo.best_seller($(item).text());\n                if (bestSeller) {\n                    bestsellers_rank.push({ ...bestSeller, link: `${this.mainHost}${item.next.attribs.href}` });\n                }\n            });\n        } catch {\n            // continue regardless of error\n        }\n\n        try {\n            const bestSalesSection = $(`#detailBulletsWrapper_feature_div > ul:nth-child(5) > li > span`)[0];\n            bestSalesSection.children.forEach((item) => {\n                if (item.type === 'text' && item.data != '') {\n                    const bestSeller = this.geo.best_seller(item.data);\n                    if (bestSeller) {\n                        bestsellers_rank.push({ ...bestSeller, link: `${this.mainHost}${item.next.attribs.href}` });\n                    }\n                }\n                if (item.type === 'tag' && item.name === 'ul') {\n                    if (item.children) {\n                        item.children.forEach((rankItem) => {\n                            const rank = $(rankItem.children[0].children[0]).text();\n                            const category = $(rankItem.children[0].children[1]).text();\n                            const link = rankItem.children[0].children[1].attribs.href;\n                            if (category && rank) {\n                                const bestSeller = this.geo.best_seller(`${rank} ${category}`);\n                                if (bestSeller) {\n                                    bestsellers_rank.push({ ...bestSeller, link: `${this.mainHost}${link}` });\n                                }\n                            }\n                        });\n                    }\n                }\n            });\n        } catch {\n            // continue regardless of error\n        }\n\n        try {\n            for (let id of this.geo.product_information.id) {\n                const informationSection = $(id);\n                if (informationSection[0]) {\n                    const len = informationSection[0].children.length;\n                    let arr = informationSection[0].children;\n                    if (len === 1) {\n                        arr = informationSection[0].children[0].children;\n                    }\n\n                    for (let item of arr) {\n                        let key = '';\n                        let value = '';\n                        if (len === 1) {\n                            try {\n                                // Some of the product information can be located in the unordered list of data\n                                if (id === '#detailBulletsWrapper_feature_div > ul:nth-child(5)') {\n                                    unOrderedList = true;\n                                    key = item.children[0].data;\n                                    value = item.children[1].data;\n                                } else {\n                                    key = item.children[0].children[0].data;\n                                    value = item.children[1].children[0].data;\n                                }\n                            } catch {\n                                // continue regardless of error\n                            }\n                        } else {\n                            try {\n                                key = item.children[0].children[0].children[0].data.replace(':', '');\n                                value = item.children[0].children[1].children[0].data;\n                            } catch {\n                                // continue regardless of error\n                            }\n                        }\n\n                        const fieldToExtract = this.geo.product_information.fields[key];\n                        if (fieldToExtract) {\n                            // Extracting data from the Best Sellers Rank section\n                            if (fieldToExtract.rank) {\n                                try {\n                                    let rankArray = [];\n                                    if (unOrderedList) {\n                                        rankArray = item.children[1].children;\n                                    } else {\n                                        rankArray = item.children[1].children[0].children;\n                                    }\n                                    rankArray.forEach((item) => {\n                                        if (item.name === 'span') {\n                                            const bestSeller = this.geo.best_seller($(item).text());\n                                            const link = item.children[1].attribs.href;\n                                            if (bestSeller) {\n                                                bestsellers_rank.push({ ...bestSeller, link: `${this.mainHost}${link}` });\n                                            }\n                                        }\n                                    });\n                                } catch {\n                                    // continue regardless of error\n                                }\n                            }\n\n                            if (fieldToExtract && value) {\n                                if (fieldToExtract.key === 'dimensions') {\n                                    // Sometimes weight is located in the dimensions section and in such cases we can separate both values and place them in the correct fields\n                                    if (value.indexOf('; ') > -1) {\n                                        const splitDimensions = value.split('; ');\n                                        if (!product_information.weight && splitDimensions[1]) {\n                                            product_information.weight = splitDimensions[1];\n                                        }\n                                        value = splitDimensions[0];\n                                    }\n                                }\n                                product_information[fieldToExtract.key] = value;\n                            }\n                        }\n                    }\n                }\n            }\n        } catch {\n            // continue regardless of error\n        }\n\n        // Calculate months and dyas on amazon\n        if (product_information.available_from) {\n            const from = moment(new Date(product_information.available_from));\n            const now = moment(new Date());\n            const duration = moment.duration(now.diff(from));\n            try {\n                product_information.available_from_utc = new Date(product_information.available_from).toISOString();\n                product_information.available_for_months = Math.ceil(duration.asMonths());\n                product_information.available_for_days = Math.ceil(duration.asDays());\n            } catch {\n                // continue regardless of error\n            }\n        }\n\n        return [product_information, bestsellers_rank];\n    }\n\n    // Extract products from the variants section (different color,size and etc)\n    extractProductVariants($, body) {\n        const variants = [];\n        let videos = [];\n\n        let variantsSelector = $('#variation_color_name > ul');\n        let productJsonMeta = '';\n\n        if (!variantsSelector[0]) {\n            variantsSelector = $('#variation_style_name > ul');\n        }\n\n        if (!variantsSelector[0]) {\n            variantsSelector = $('#variation_size_name > ul');\n        }\n\n        // Most of the variant related data can be extracted from the JSON that is located right on the product page\n        // But sometimes it isn't and for such cases we will use again cheerio\n        try {\n            const json = /jQuery.parseJSON\\('([\\w{}:;&,-.[\\]\\s+%\\/()\\/\"|\\\\`']+)'\\)/.exec(body);\n\n            if (json) {\n                productJsonMeta = JSON.parse(json[1].replace(/\\\\'/g, `'`));\n            }\n        } catch {\n            // continue regardless of error\n        }\n\n        // If there is a valid JSON\n        if (productJsonMeta) {\n            if (Object.keys(productJsonMeta.colorToAsin).length) {\n                for (let item in productJsonMeta.colorToAsin) {\n                    const images = productJsonMeta.colorImages[item] || [];\n\n                    const variant = {\n                        asin: productJsonMeta.colorToAsin[item].asin,\n                        images: images,\n                        title: item,\n                        link: `https://www.amazon.com/dp/${productJsonMeta.colorToAsin[item].asin}/?th=1&psc=1`,\n                        is_current_product: productJsonMeta.colorToAsin[item].asin === this.asin,\n                        price: '',\n                    };\n                    try {\n                        const price = $(`li[data-defaultasin=\"${productJsonMeta.colorToAsin[item].asin}\"] div.twisterSlotDiv`).text();\n                        if (price) variant.price = price;\n                    } catch {\n                        // continue regardless of error\n                    }\n                    variants.push(variant);\n                }\n            }\n            videos = productJsonMeta.videos;\n            // If there is no valid JSON\n        } else {\n            try {\n                for (let item of variantsSelector[0].children) {\n                    const variant = {\n                        asin: '',\n                        images: '',\n                        title: '',\n                        link: ``,\n                        is_current_product: false,\n                        price: '',\n                    };\n                    if (item.attribs['data-defaultasin']) {\n                        variant.asin = item.attribs['data-defaultasin'];\n                    }\n                    if (item.attribs['data-dp-url']) {\n                        const findAsin = /dp\\/(\\w+)\\//.exec(item.attribs['data-dp-url']);\n                        if (findAsin) {\n                            variant.asin = findAsin[1];\n                        }\n                    }\n\n                    try {\n                        const price = $(`li[id=${item.attribs['id']}] div.twisterSlotDiv`).text();\n                        if (price) variant.price = price;\n                        variant.images =\n                            item.children[0].children[0].children[0].children[0].children[0].children[0].children[1].children[0].children[0].attribs.src;\n                    } catch {\n                        // continue regardless of error\n                    }\n                    variant.title = item.attribs['title'] ? item.attribs['title'].split(this.geo.variants.split_text)[1] : ''; //item.children[0].children[0].children[0].children[0].children[0].children[0].children[1].children[0].children[0].attribs.alt;\n\n                    variants.push({\n                        ...variant,\n                        images: variant.images ? [`${variant.images.split('._')[0]}._AC_SY879_.jpg`] : [],\n                        link: `https://www.amazon.com/dp/${variant.asin}/?th=1&psc=1`,\n                        is_current_product: variant.asin === this.asin,\n                    });\n                }\n            } catch {\n                // continue regardless of error\n            }\n        }\n        return [variants, videos];\n    }\n\n    // Extract product from section \"Customers who bought this item also bought\"\n    extractAlsoBought($) {\n        const also_bought = [];\n        const bought = $(\n            '#desktop-dp-sims_purchase-similarities-sims-feature > div > div.a-row.a-carousel-controls.a-carousel-row.a-carousel-has-buttons > div > div.a-carousel-col.a-carousel-center > div',\n        );\n\n        if (!bought[0]) {\n            return also_bought;\n        }\n\n        try {\n            if (!bought[0].children[0].children) return also_bought;\n        } catch {\n            return also_bought;\n        }\n        for (let item of bought[0].children[0].children) {\n            const product = {\n                asin: '',\n                title: '',\n                image: [],\n                url: ``,\n                reviews: {\n                    total_reviews: 0,\n                    rating: 0,\n                },\n                price: {\n                    symbol: this.geo.symbol,\n                    currency: this.geo.currency,\n                    current_price: 0,\n                },\n                badges: {\n                    amazon_prime: false,\n                },\n            };\n            try {\n                const asin = JSON.parse(item.children[0].attribs['data-p13n-asin-metadata']);\n                product.asin = asin.asin;\n                product.url = `https://www.amazon.com/dp/${product.asin}/?th=1&psc=1`;\n            } catch {\n                // continue regardless of error\n            }\n\n            try {\n                const titleImg = item.children[0].children[0].children[0].children[0];\n                if (titleImg) {\n                    product.title = titleImg.attribs.alt;\n                    product.image = [titleImg.attribs.src];\n                }\n            } catch {\n                // continue regardless of error\n            }\n\n            try {\n                const review = $(item.children[0].children[1].children[1]).text();\n                if (review) {\n                    product.reviews.total_reviews = parseInt(review.replace(/[^\\d]/g, ''), 10);\n                }\n            } catch {\n                // continue regardless of error\n            }\n\n            try {\n                const rating = item.children[0].children[1].children[0].children[0];\n                if (rating) {\n                    const classRating = rating.attribs.class;\n                    if (classRating.indexOf('a-star-') > -1) {\n                        const splitRating = classRating.split('a-star-')[1];\n                        product.reviews.rating = parseFloat(splitRating.replace('-', '.'));\n                    }\n                }\n            } catch {\n                // continue regardless of error\n            }\n\n            try {\n                const price = $(item.children[0].children[2]).text();\n                if (price) {\n                    product.price.current_price = this.geo.price_format(price);\n                }\n            } catch {\n                // continue regardless of error\n            }\n            also_bought.push(product);\n        }\n        return also_bought;\n    }\n\n    // Extract products from the section \"Sponsored products related to this item\"\n    extractSponsoredProducts($) {\n        const sponsored_products = [];\n        const sponsored = $('#sp_detail-none > div:nth-child(3) > div > div > div.a-carousel-col.a-carousel-center > div');\n\n        if (!sponsored[0]) {\n            return sponsored_products;\n        }\n\n        try {\n            if (!sponsored[0].children[0].children) return sponsored_products;\n        } catch {\n            return sponsored_products;\n        }\n\n        for (let item of sponsored[0].children[0].children) {\n            const product = {\n                asin: '',\n                title: '',\n                image: [],\n                url: ``,\n                reviews: {\n                    total_reviews: 0,\n                    rating: 0,\n                },\n                price: {\n                    symbol: this.geo.symbol,\n                    currency: this.geo.currency,\n                    current_price: 0,\n                },\n                badges: {\n                    amazon_prime: false,\n                },\n            };\n\n            product.asin = item.children[1].attribs['data-asin'];\n            product.url = `https://www.amazon.com/dp/${product.asin}/?th=1&psc=1`;\n\n            try {\n                const titleImg = $(`#sp_detail-none_${product.asin} > a > img`);\n                if (titleImg[0]) {\n                    product.title = titleImg[0].attribs.alt;\n                    product.image = [titleImg[0].attribs.src];\n                }\n            } catch {}\n\n            const review = $(`#sp_detail-none_${product.asin} > div:nth-child(6) > a > span`).text();\n            if (review) {\n                product.reviews.total_reviews = parseInt(review.replace(/[^\\d]/g, ''), 10);\n            }\n\n            const price = $(`#sp_detail-none_${product.asin} > div.a-row.a-color-price > a:nth-child(1) > span`).text();\n            if (price) {\n                product.price.current_price = this.geo.price_format(price);\n            }\n\n            const prime = $(`#sp_detail-none_${product.asin} > div.a-row.a-color-price > a:nth-child(2) > span > i`);\n            if (prime[0]) {\n                if (prime[0].attribs.class.indexOf('a-icon-prime') > -1) {\n                    product.badges.amazon_prime = true;\n                }\n            }\n\n            const rating = $(`#sp_detail-none_${product.asin} > div:nth-child(6) > a > i`);\n            if (rating[0]) {\n                const classRating = rating[0].attribs.class;\n                if (classRating.indexOf('a-star-') > -1) {\n                    const splitRating = classRating.split('a-star-')[1];\n                    product.reviews.rating = splitRating.indexOf('-') > -1 ? splitRating.replace('-', '.') : splitRating;\n                }\n            }\n\n            sponsored_products.push(product);\n        }\n        return sponsored_products;\n    }\n    /**\n     * Collect asin details from the html response\n     * @param {*} body\n     */\n    grapAsinDetails(body) {\n        body = body.replace(/\\s\\s+/g, '').replace(/\\n/g, '');\n        const $ = cheerio.load(body);\n\n        const output = {\n            title: '',\n            description: '',\n            feature_bullets: [],\n            variants: [],\n            categories: [],\n            asin: this.asin,\n            url: `${this.mainHost}/dp/${this.asin}`,\n            reviews: {\n                total_reviews: 0,\n                rating: 0,\n                answered_questions: 0,\n            },\n            item_available: true,\n            price: {\n                symbol: this.geo.symbol,\n                currency: this.geo.currency,\n                current_price: 0,\n                discounted: false,\n                before_price: 0,\n                savings_amount: 0,\n                savings_percent: 0,\n            },\n            bestsellers_rank: [],\n            main_image: '',\n            total_images: 0,\n            images: [],\n            total_videos: 0,\n            videos: [],\n            delivery_message: '',\n            product_information: {\n                dimensions: '',\n                weight: '',\n                available_from: '',\n                available_for_months: 0,\n                available_for_days: 0,\n                manufacturer: '',\n                model_number: '',\n                department: '',\n\n                store_id: '',\n                brand: '',\n                sold_by: '',\n                fulfilled_by: '',\n                qty_per_order: 'na',\n            },\n            badges: {\n                amazon_сhoice: false,\n                amazon_prime: false,\n            },\n            sponsored_products: [],\n            also_bought: [],\n            other_sellers: [],\n        };\n\n        const book_in_series = this.extractBookInSeries($);\n        if (book_in_series.length) {\n            output.book_in_series = book_in_series;\n        }\n\n        output.other_sellers = this.extractOtherSellers($);\n\n        const authors = this.extractAuthors($);\n        if (authors.length) {\n            output.authors = authors;\n        }\n\n        output.categories = this.extractProductCategories($);\n        output.item_available = $('span.qa-availability-message').text() ? false : true;\n\n        output.sponsored_products = this.extractSponsoredProducts($);\n        output.also_bought = this.extractAlsoBought($);\n\n        [output.variants, output.videos] = this.extractProductVariants($, body);\n        output.total_videos = output.videos.length;\n\n        output.description = $('#productDescription').text();\n\n        if (body.indexOf('bookDescription_feature_div') > -1 && !output.description) {\n            output.description = $('#bookDescription_feature_div').text();\n            try {\n                output.description = $(output.description).text() || '';\n            } catch {\n                // continue regardless of error\n            }\n        }\n\n        output.feature_bullets = this.extractProductFeatures($);\n        [output.product_information, output.bestsellers_rank] = this.extractProductInfromation($);\n\n        const deliveryMessage = $('#deliveryMessageMirId').text();\n        output.delivery_message = deliveryMessage;\n\n        const merchantInfo = $('div[id=\"merchant-info\"]').text();\n        if (merchantInfo) {\n            try {\n                if (merchantInfo.indexOf('Ships from and sold by ') > -1) {\n                    const splitSoldBy = merchantInfo.split('Ships from and sold by ')[1];\n                    output.product_information.sold_by = splitSoldBy.slice(0, -1);\n                    output.product_information.fulfilled_by = splitSoldBy.slice(0, -1);\n                } else {\n                    const splitSoldBy = merchantInfo.split('Sold by ')[1].split(' and ');\n                    output.product_information.sold_by = splitSoldBy[0];\n                    output.product_information.fulfilled_by = splitSoldBy[1].split('Fulfilled by ')[1].slice(0, -1);\n                }\n            } catch {\n                // continue regardless of error\n            }\n        }\n\n        const maxOrderQty = $('select[id=\"quantity\"]');\n        if (maxOrderQty) {\n            try {\n                output.product_information.qty_per_order = maxOrderQty[0] ? maxOrderQty[0].children.length : 'na';\n            } catch {\n                // continue regardless of error\n            }\n        }\n\n        output.title = $(`span[id=\"productTitle\"]`).text() || $('.qa-title-text').text();\n        output.reviews.total_reviews = $(`span[id=\"acrCustomerReviewText\"]`).text().split(/\\s/)[0]\n            ? parseInt(\n                  $(`span[id=\"acrCustomerReviewText\"]`)\n                      .text()\n                      .split(/\\s/)[0]\n                      .replace(/[^0-9]/g, ''),\n                  10,\n              )\n            : 0;\n        output.reviews.answered_questions = $(`a[id=\"askATFLink\"]`).text() ? parseInt($(`a[id=\"askATFLink\"]`).text(), 10) : 0;\n        output.reviews.rating = $(`span.reviewCountTextLinkedHistogram.noUnderline`)[0]\n            ? $($(`span.reviewCountTextLinkedHistogram.noUnderline`)[0]).text().split(/\\s/g)[0]\n            : 0;\n\n        output.price.current_price = $(`#priceblock_ourprice`)[0] ? this.geo.price_format($($(`#priceblock_ourprice`)[0].children[0]).text()) : 0;\n        if (!output.current_price) {\n            try {\n                output.price.current_price = this.geo.price_format($($(`.apexPriceToPay`)[0].children[0]).text());\n            } catch {\n                // continue regardless of error\n            }\n        }\n\n        output.product_information.store_id = $(`input[id=\"storeID\"]`).val();\n        output.product_information.brand = $(`a[id=\"bylineInfo\"]`).text() || '';\n\n        output.badges.amazon_сhoice = $(`div.ac-badge-wrapper`)[0] ? true : false;\n        output.badges.amazon_prime = $(`span[id=\"priceBadging_feature_div\"]`)[0] ? true : false;\n\n        output.price.discounted = $(`span.priceBlockStrikePriceString.a-text-strike`)[0] ? true : false;\n        output.price.before_price = output.price.discounted\n            ? this.geo.price_format($(`span.priceBlockStrikePriceString.a-text-strike`).text())\n            : output.price.current_price;\n\n        if (output.price.discounted) {\n            output.price.savings_amount = +(output.price.before_price - output.price.current_price).toFixed(2);\n\n            output.price.savings_percent = +((100 / output.price.before_price) * output.price.savings_amount).toFixed(2);\n        }\n\n        output.images = this.extractImages($, body);\n        output.main_image = output.images.length ? output.images[0] : '';\n        output.total_images = output.images.length;\n\n        this.collector.push(output);\n    }\n\n    /**\n     * Collect products from html response\n     * @param {*} body\n     */\n    grabProduct(body, p) {\n        const $ = cheerio.load(body.replace(/\\s\\s+/g, '').replace(/\\n/g, ''));\n        let productList = $('div[data-index]');\n        const scrapingResult = {};\n\n        let position = 0;\n        for (let i = 0; i < productList.length; i++) {\n\n            const asin = productList[i].attribs['data-asin'];\n\n            if (!asin) {\n                continue;\n            }\n\n            scrapingResult[asin] = {\n                position: {\n                    page: p,\n                    position: (position += 1),\n                    global_position: `${p}${i}`,\n                },\n                asin,\n                price: {\n                    discounted: false,\n                    current_price: 0,\n                    currency: this.geo.currency,\n                    before_price: 0,\n                    savings_amount: 0,\n                    savings_percent: 0,\n                },\n                reviews: {\n                    total_reviews: 0,\n                    rating: 0,\n                },\n                url: `${this.mainHost}/dp/${asin}`,\n                score: 0,\n                sponsored: false,\n                amazonChoice: false,\n                bestSeller: false,\n                amazonPrime: false,\n            };\n        }\n\n        for (let key in scrapingResult) {\n            try {\n                const priceSearch = $(`div[data-asin=${key}] span[data-a-size=\"l\"]`)[0] || $(`div[data-asin=${key}] span[data-a-size=\"m\"]`)[0];\n                const discountSearch = $(`div[data-asin=${key}] span[data-a-strike=\"true\"]`)[0];\n                const ratingSearch = $(`div[data-asin=${key}] .a-icon-star-small`)[0];\n                const titleThumbnailSearch = $(`div[data-asin=${key}] [data-image-source-density=\"1\"]`)[0];\n                const amazonChoice = $(`div[data-asin=${key}] span[id=\"${key}-amazons-choice\"]`).text();\n                const bestSeller = $(`div[data-asin=${key}] span[id=\"${key}-best-seller\"]`).text();\n                const amazonPrime = $(`div[data-asin=${key}] .s-prime`)[0];\n\n                if (priceSearch) {\n                    scrapingResult[key].price.current_price = this.geo.price_format($(priceSearch.children[0]).text());\n                }\n\n                if (amazonChoice) {\n                    scrapingResult[key].amazonChoice = true;\n                }\n                if (bestSeller) {\n                    scrapingResult[key].bestSeller = true;\n                }\n                if (amazonPrime) {\n                    scrapingResult[key].amazonPrime = true;\n                }\n\n                if (discountSearch) {\n                    scrapingResult[key].price.before_price = this.geo.price_format($(discountSearch.children[0]).text());\n\n                    scrapingResult[key].price.discounted = true;\n\n                    const savings = scrapingResult[key].price.before_price - scrapingResult[key].price.current_price;\n                    if (savings <= 0) {\n                        scrapingResult[key].price.discounted = false;\n\n                        scrapingResult[key].price.before_price = 0;\n                    } else {\n                        scrapingResult[key].price.savings_amount = +(\n                            scrapingResult[key].price.before_price - scrapingResult[key].price.current_price\n                        ).toFixed(2);\n                        scrapingResult[key].price.savings_percent = +(\n                            (100 / scrapingResult[key].price.before_price) *\n                            scrapingResult[key].price.savings_amount\n                        ).toFixed(2);\n                    }\n                }\n\n                if (ratingSearch) {\n                    scrapingResult[key].reviews.rating = parseFloat(ratingSearch.children[0].children[0].data);\n\n                    scrapingResult[key].reviews.total_reviews = parseInt(\n                        ratingSearch.parent.parent.parent.next.attribs['aria-label'].replace(/\\,/g, ''),\n                    );\n\n                    scrapingResult[key].score = parseFloat(scrapingResult[key].reviews.rating * scrapingResult[key].reviews.total_reviews).toFixed(2);\n                }\n\n                if (titleThumbnailSearch) {\n                    scrapingResult[key].title = titleThumbnailSearch.attribs.alt;\n\n                    scrapingResult[key].thumbnail = titleThumbnailSearch.attribs.src;\n                }\n            } catch (err) {\n                continue;\n            }\n        }\n\n        for (let key in scrapingResult) {\n            this.collector.push(scrapingResult[key]);\n        }\n        if (productList.length < 10) {\n            throw new Error('No more products');\n        }\n        return;\n    }\n\n    /**\n     * Filter reviews/products by required rating\n     * @param {*} item\n     */\n    validateRating(item) {\n        if (this.scrapeType === 'products') {\n            if (item.reviews.rating >= this.minRating && item.reviews.rating <= this.maxRating) {\n                return item;\n            }\n        }\n        if (this.scrapeType === 'reviews') {\n            if (item.rating >= this.minRating && item.rating <= this.maxRating) {\n                return item;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Extract product category/subcategory\n     * @param {*} $\n     */\n    extractProductCategories($) {\n        const categories = [];\n        const cateogriesss = $('#wayfinding-breadcrumbs_feature_div > ul')[0];\n        if (cateogriesss && cateogriesss.children) {\n            cateogriesss.children.forEach((item) => {\n                try {\n                    if (!item.attribs.class) {\n                        const url = `${this.mainHost}${item.children[0].children[0].attribs.href}`;\n                        const category = item.children[0].children[0].children[0].data;\n                        categories.push({\n                            category,\n                            url,\n                        });\n                    }\n                } catch {\n                    // continue regardless of error\n                }\n            });\n        }\n        return categories;\n    }\n\n    /**\n     * In case of a book we can extract name of authors\n     */\n    extractAuthors($) {\n        const authors = [];\n        const byAuthors = $('#bylineInfo')[0];\n        if (byAuthors && byAuthors.children) {\n            byAuthors.children.forEach((item, index) => {\n                try {\n                    if (item && item.name === 'span' && item.attribs.class.indexOf('author') > -1) {\n                        let url = '';\n                        let author = '';\n                        let role = $(`#bylineInfo > span:nth-child(${index}) > span.contribution`).text();\n                        if (role) {\n                            role = role.replace(/[(),\\s]/g, '');\n                        }\n                        if (item.children[0].name === 'a') {\n                            const link = $(`#bylineInfo > span:nth-child(${index}) > a`)[0].attribs.href;\n                            if (link != '#') {\n                                url = `${this.mainHost}${link}`;\n                                author = $(`#bylineInfo > span:nth-child(${index}) > a`).text();\n                            }\n                        } else {\n                            const link = $(`#bylineInfo > span:nth-child(1) > span.a-declarative > a.a-link-normal.contributorNameID`)[0].attribs\n                                .href;\n                            url = `${this.mainHost}${link}`;\n                            author = $(`#bylineInfo > span:nth-child(1) > span.a-declarative > a.a-link-normal.contributorNameID`).text();\n                        }\n                        if (author && url) {\n                            authors.push({\n                                author,\n                                role,\n                                url,\n                            });\n                        }\n                    }\n                } catch {\n                    // continue regardless of error\n                }\n            });\n        }\n        return authors;\n    }\n\n    /**\n     * Extract data from section \"Other sellers on Amazon\"\n     * @param {*} $\n     */\n    extractOtherSellers($) {\n        const other_sellers = [];\n        const moreBuyingOptions = $('#mbc')[0];\n        let position = 0;\n        if (moreBuyingOptions && moreBuyingOptions.children) {\n            moreBuyingOptions.children.forEach((item, index) => {\n                try {\n                    if (item.attribs.class && item.attribs.class === 'a-box mbc-offer-row pa_mbc_on_amazon_offer') {\n                        position += 1;\n                        const price = $(`#mbc > div:nth-child(${index + 1}) > div > span.a-declarative > div > div:nth-child(1)`).text();\n                        const seller = $(`#mbc-sold-by-${position} > span.a-size-small.mbcMerchantName`).text();\n                        const url = `${this.mainHost}${$(`#mbc-buybutton-addtocart-${position}-announce`)[0].attribs.href}`;\n                        other_sellers.push({\n                            position,\n                            seller,\n                            url,\n                            price: {\n                                symbol: this.geo.symbol,\n                                currency: this.geo.currency,\n                                current_price: this.geo.price_format(price),\n                            },\n                        });\n                    }\n                } catch {\n                    // continue regardless of error\n                }\n            });\n        }\n        return other_sellers;\n    }\n\n    /**\n     * Extract images\n     * @param {*} $\n     * @param {*} body\n     */\n    extractImages($, body) {\n        let images = [];\n        /**\n         *  Some product have all the images located in the imageGalleryData array\n         *  We will check if this array exists, if exists then we will extract it and collect the image url's\n         *  Product types: books\n         * */\n        const imgRegex = /'colorImages': { 'initial': (.+)},'colorToAsin'/.exec(body);\n        if (imgRegex) {\n            try {\n                const imageGalleryData = JSON.parse(imgRegex[1]);\n                images = imageGalleryData.map((item) => item.hiRes || item.large);\n            } catch {\n                // continue regardless of error\n            }\n        }\n\n        /**\n         * If for example book item does have only one image\n         * then {imageGalleryData} won't exist and we will use different way of extracting required data\n         * Product types: books\n         */\n        if (!images.length) {\n            const imageData = $('#imgBlkFront')[0] || $('#ebooksImgBlkFront')[0];\n            if (imageData) {\n                const data = imageData.attribs['data-a-dynamic-image'];\n                const json = JSON.parse(data);\n                const keys = Object.keys(json);\n                const imageIdregex = /\\/([\\w-+]{9,13})\\./.exec(keys[0]);\n                if (imageIdregex) {\n                    images.push(`https://images-na.ssl-images-amazon.com/images/I/${imageIdregex[1]}.jpg`);\n                }\n            }\n        }\n\n        /**\n         * Extract images from other types of products\n         * Product types: all other\n         */\n        if (!images.length) {\n            const thumbnail = $('span[data-action=\"thumb-action\"]');\n            for (let i = 0; i < thumbnail.length; i++) {\n                try {\n                    let url = thumbnail[i].children[0].children[0].children[1].children[0].attribs.src;\n                    if (url.indexOf('x-locale/common') === -1) {\n                        images.push(`${url.split('._')[0]}._AC_SY879_.jpg`);\n                    }\n                } catch {\n                    // continue regardless of error\n                }\n            }\n        }\n        return images;\n    }\n\n    /**\n     * Extract book series (if available)\n     * @param {*} $\n     */\n    extractBookInSeries($) {\n        const series = [];\n\n        const bookSeriesName = $(`div.shoveler-cell:nth-child(2)`)[0];\n        if (bookSeriesName) {\n            try {\n                const url = $('div.shoveler-cell:nth-child(2) > a:nth-child(1)')[0].attribs.href;\n                const image = $(`img.product-image:nth-child(1)`)[0].attribs.src;\n                const series_name = $('div.shoveler-cell:nth-child(2) > a:nth-child(2)').text();\n                series.push({\n                    series_name: series_name.trim(),\n                    images: [image],\n                    url: `${this.mainHost}${url}`,\n                });\n            } catch {\n                // continue regardless of error\n            }\n        }\n        const booksInTheSeries = $(\n            'div.a-carousel-controls:nth-child(3) > div:nth-child(1) > div:nth-child(2) > div:nth-child(1) > ol:nth-child(1)',\n        )[0];\n        if (booksInTheSeries && booksInTheSeries.children) {\n            booksInTheSeries.children.forEach((item, index) => {\n                try {\n                    index += 1;\n                    const reviews = {\n                        total_reviews: 0,\n                        rating: 0,\n                    };\n\n                    const price = {\n                        symbol: this.geo.symbol,\n                        currency: this.geo.currency,\n                        current_price: 0,\n                    };\n\n                    const serie = $(\n                        `div.a-carousel-controls:nth-child(3) > div:nth-child(1) > div:nth-child(2) > div:nth-child(1) > ol:nth-child(1) > li:nth-child(${index}) > div:nth-child(1) > a:nth-child(1) > div:nth-child(1) > span:nth-child(1)`,\n                    ).text();\n                    const image = $(\n                        `div.a-carousel-controls:nth-child(3) > div:nth-child(1) > div:nth-child(2) > div:nth-child(1) > ol:nth-child(1) > li:nth-child(${index}) > div:nth-child(1) > a:nth-child(1) > div:nth-child(1) > img:nth-child(2)`,\n                    )[0].attribs.src;\n                    const url = $(\n                        `div.a-carousel-controls:nth-child(3) > div:nth-child(1) > div:nth-child(2) > div:nth-child(1) > ol:nth-child(1) > li:nth-child(${index}) > div:nth-child(1) > a:nth-child(1)`,\n                    )[0].attribs.href;\n                    const title = $(\n                        `div.a-carousel-controls:nth-child(3) > div:nth-child(1) > div:nth-child(2) > div:nth-child(1) > ol:nth-child(1) > li:nth-child(${index}) > div:nth-child(1) > a:nth-child(2) > span:nth-child(1)`,\n                    ).text();\n\n                    const total_reviews = $(\n                        `div.a-carousel-controls:nth-child(3) > div:nth-child(1) > div:nth-child(2) > div:nth-child(1) > ol:nth-child(1) > li:nth-child(${index}) > div:nth-child(1) > div:nth-child(3) > div:nth-child(1) > span:nth-child(1) > a:nth-child(1) > span:nth-child(2)`,\n                    ).text();\n                    const rating = $(\n                        `div.a-carousel-controls:nth-child(3) > div:nth-child(1) > div:nth-child(2) > div:nth-child(1) > ol:nth-child(1) > li:nth-child(${index}) > div:nth-child(1) > div:nth-child(3) > div:nth-child(1) > span:nth-child(1) > a:nth-child(1) > i:nth-child(1) > span:nth-child(1)`,\n                    )[0]\n                        ? $(\n                              $(\n                                  `div.a-carousel-controls:nth-child(3) > div:nth-child(1) > div:nth-child(2) > div:nth-child(1) > ol:nth-child(1) > li:nth-child(${index}) > div:nth-child(1) > div:nth-child(3) > div:nth-child(1) > span:nth-child(1) > a:nth-child(1) > i:nth-child(1) > span:nth-child(1)`,\n                              )[0],\n                          )\n                              .text()\n                              .split(/\\s/g)[0]\n                        : 0;\n                    reviews.total_reviews = parseInt(total_reviews.replace(/[^\\d]/g, ''), 10);\n                    reviews.rating = rating;\n\n                    const current_price = $(\n                        `div.a-carousel-controls:nth-child(3) > div:nth-child(1) > div:nth-child(2) > div:nth-child(1) > ol:nth-child(1) > li:nth-child(${index}) > div:nth-child(1) > div:nth-child(5)`,\n                    ).text();\n\n                    price.current_price = this.geo.price_format(current_price);\n\n                    series.push({\n                        serie,\n                        title,\n                        images: [image],\n                        url: `${this.mainHost}${url}`,\n                        reviews,\n                        price,\n                    });\n                } catch {\n                    // continue regardless of error\n                }\n            });\n        }\n        return series;\n    }\n\n    async extractCategories() {\n        const body = await this.buildRequest();\n        const $ = cheerio.load(body.replace(/\\s\\s+/g, '').replace(/\\n/g, ''));\n        const categorySelect = $('#searchDropdownBox')[0];\n\n        if (!Array.isArray(categorySelect.children)) {\n            throw new Error(\"Can't find category selector\");\n        }\n\n        let categories = {};\n        for (let select of categorySelect.children) {\n            const category = select.attribs.value.split('search-alias=')[1];\n            categories[category] = {\n                name: select.children[0].data,\n                category,\n            };\n        }\n\n        return categories;\n    }\n}\n\nmodule.exports = AmazonScraper;\n"],"sourceRoot":""}